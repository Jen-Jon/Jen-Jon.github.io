<!DOCTYPE html>
<html lang=""><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Swift学习(8)-函数（代码完善版）</title>
    <meta name="description" content="A simple homepage of Jensen Zhang.">
    <meta name="author" content='Jensen Zhang'>

    <link href="https://cdn.jsdelivr.net/gh/Jen-Jon/CDN_Bank/srcs/bloglayouts/homepage_css2.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/Jen-Jon/CDN_Bank/srcs/bloglayouts/buttonsstyle.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous">

    <script defer src="https://cdn.jsdelivr.net/gh/Jen-Jon/CDN_Bank/srcs/bloglayouts/backbutton.js"></script>
    <script async src="https://cdn.jsdelivr.net/gh/Jen-Jon/CDN_Bank/srcs/bloglayouts/busuanzi.pure.mini.js"></script>

    
    <script>
        WIDGET = {
        "CONFIG": {
            "modules": "0124",
            "background": "5",
            "tmpColor": "fff",
            "tmpSize": "16",
            "tmpPadding": "10px",
            "cityColor": "000",
            "citySize": "16",
            "aqiColor": "fff",
            "aqiSize": "16",
            "weatherIconSize": "24",
            "alertIconSize": "18",
            "padding": "0px",
            
            "language": "en",
            "key": "06a49925209149af84e325a6c7e5c521"
        }
        }
    </script>
    <script src="https://cdn.jsdelivr.net/gh/Jen-Jon/CDN_Bank/srcs/qweather/he-simple-common-v2.0.2.js"></script>
    

    
    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?a4cacad7bf6ee4f58534d26d5b23ad14";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
    </script>
    

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.0/fuse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/Jen-Jon/CDN_Bank/srcs/bloglayouts/search-v1.3.js"></script>

    
    <script id="search-result-template" type="text/x-js-template">
        <article id="summary-${key}">
            <header>
                <h3><i class="fas fa-file-alt"></i> <a href="${link}">${title}</a></h3>
                <h4>${date} | ${type} blog | ${tags}</h4>
            </header>
            <div>
                <div>${snippet}...</div>
                
                <div class="ReadButton">
                    <a class="read-more-link ReadButton_a" href="https://jen-jon.github.io/posts/20210822/">
                        <strong style="color: #fff;">Read More</strong>
                    </a>
                </div>
                
            </div>
            <hr>
        </article>
    </script>

    
    <link rel="stylesheet" href="/sass/researcher.min.css">

    
        <link rel="icon" type="image/ico" href="https://jen-jon.github.io/images/favicon.ico">
    

    
        
    
</head>

    <body><div id="ukraine" style="background-color: #1f71e0; ">
    <a class="cba fas fa-window-close" onclick="test()" style="display:block; float:right; width:30px; height:29px;" href="#"></a>
    <div style="height: 50px; display: flex; text-align: center; justify-content: center; align-items: center;">
        <div style="margin: 0 10px;">
            <div style="font-size: 45px;">🇺🇦</div>
        </div>
        <div style="margin: 0 10px;">
            <a style="color: white;" href="/we-stand-with-ukraine">
                <div style="color: white; font-weight: bold; font-size: large;">We stand with Ukraine!</div>
                <div style="color: white; font-weight: bold; font-size: large;">我们支持乌克兰！</div>
            </a>
        </div>
    </div>
</div>
<script>
    function test() {
        document.getElementById("ukraine").parentElement.removeChild(document.getElementById("ukraine"));
    }
</script>

<div class="container mt-5" style="text-align: right;">
    
    <div style="display: inline-flex; background-color: #1f71e0;">
        <div style="z-index: 9999;"><div id="he-plugin-simple"></div></div>
    </div>
    
    <nav class="navbar navbar-expand-sm flex-column flex-sm-row text-nowrap p-0">
        <a class="navbar-brand mx-0 mr-sm-auto" href="https://jen-jon.github.io/" title="Jensen&#39;s Homepage">
          
          <i class="fas fa-home"></i>
          Jensen&#39;s Homepage
        </a>
        <div class="navbar-nav flex-row flex-wrap justify-content-center">
            
                
                
                    <a class="nav-item nav-link" href="/about" title="About">
                        About
                    </a>
                    
                        <span class="nav-item navbar-text mx-1">/</span>
                    
                
                    <a class="nav-item nav-link" href="/posts" title="Posts">
                        Posts
                    </a>
                    
                        <span class="nav-item navbar-text mx-1">/</span>
                    
                
                    <a class="nav-item nav-link" href="/mediatest" title="Media">
                        Media
                    </a>
                    
                        <span class="nav-item navbar-text mx-1">/</span>
                    
                
                    <a class="nav-item nav-link" href="https://cdn.jsdelivr.net/gh/Jen-Jon/CDN_Bank/srcs/Resumes/Resume_of_Jensen.pdf" title="Resume/CV">
                        Resume/CV
                    </a>
                    
                
            
        </div>
    </nav>
</div>
<hr><div id="content">
<div class="container">
    
    <h1 style="color: #1f71e0;">Swift学习(8)-函数（代码完善版）</h1>
    
    <h5>Posted by <a href="https://jen-jon.github.io/">Jensen Zhang</a> on <em>August 22, 2021</em> | <spa id="busuanzi_container_page_pv"><i class="fas fa-eye"></i> <em><span id="busuanzi_value_page_pv"></span></em> readings</span> </h5>
    
    <h5>This article is about <em style="color: #1f71e0;">8052</em> words and may take <em style="color: #1f71e0;">17</em> minutes to read.</h5>
    <hr>
    
    
    <p><img src="https://cdn.jsdelivr.net/gh/Jen-Jon/CDN_Bank/srcs/blogstatic/images/function.png" alt="Logo"/></p>
    <hr>
    
    
    <blockquote>
        <p><strong>Type: technology blog</strong></p>
        <p><strong>Tags: iOS; Swift; Apple</strong></p>
    </blockquote>
    <hr>
    
    
    <h1 style="color: #1f71e0;">Content</h1>
    <br>
    
    <p>函数是一段完成特定任务的独立代码片段。可以通过函数命名来标识某个函数的功能，这个名字可以被用来在需要的时候“调用”这个函数来玩成它的任务。</p>
<p><code>Swift</code>统一的函数语法非常灵活，可以用来表示任何函数，包括从最简单的没有参数名字的<code>C</code>风格函数，到复杂的带局部和外部参数名的<code>Objective-C</code>风格函数。参数可以提供默认值，以简化函数调用。参数也可以既当做传入参数也当做传出参数，也就是说，一旦函数执行结束，传入的参数值将被修改。</p>
<p>在<code>Swift</code>中，每个函数都有一个由函数的参数值类型和返回值类型组成的类型，可以把函数类型当做任何其他普通变量类型一样处理，这样就可以更简单地把函数当做别的函数的参数，也可以从其他函数中返回函数。函数的定义可以写在其他函数定义中，这样可以在嵌套函数范围内实现功能封装。</p>
<hr>
<h2 id="函数的定义与调用">函数的定义与调用</h2>
<p>当定义一个函数时，可以定义一个或多个有名字和类型的值，作为函数的输入，称为参数，也可以定义某种类型的值作为函数执行结束时的输出，称为返回类型。</p>
<p>每个函数都有函数名，用来描述函数执行的任务。要使用一个函数时，用函数名来“调用”这个函数，并传给它匹配的输入值（称作实参）。函数的实参必须与函数参数表里的参数的顺序一致。</p>
<p>下面例子中的函数名字是<code>greet(person:)</code>，之所以叫这个名字，是因为这个函数用一个人的名字当做输入，并返回向这个人问候的语句。为了完成这个任务，需要定义一个输入参数：一个叫做<code>person</code>的<code>String</code>值，和一个包含给这个人问候语的<code>String</code>类型返回值。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">greet</span>(person: String) -&gt; String {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> greeting = <span style="color:#e6db74">&#34;Hello, &#34;</span> <span style="color:#f92672">+</span> person <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;!&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> greeting
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>所有的这些信息汇总起来称为函数的定义，并以<code>func</code>作为前缀。指定函数返回类型时，用返回箭头<code>-&gt;</code>（一个连字符后跟一个右尖括号）后跟返回类型的名称的方式来表示。</p>
<p>该定义描述了函数的功能，它期望接收什么作为参数和执行结束时它返回的结果是什么类型。这样的定义使得函数可以在别的地方以一种清晰的方式被调用：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span>print(greet(person: <span style="color:#e6db74">&#34;Jensen&#34;</span>))  <span style="color:#75715e">// 打印输出&#34;Hello, Jensen!&#34;</span>
</span></span><span style="display:flex;"><span>print(greet(person: <span style="color:#e6db74">&#34;Morris&#34;</span>))  <span style="color:#75715e">// 打印输出&#34;Hello, Morris!&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>output: Hello, Jensen!
</span></span><span style="display:flex;"><span>Hello, Morris!
</span></span></code></pre></div><p>调用<code>greet(person:)</code>函数时，在圆括号中传给它一个<code>String</code>类型的实参，例如<code>greet(person: &quot;Anna&quot;)</code>。正如上面所示，因为这个函数返回一个<code>String</code>类型的值，所以<code>greet</code>可以被包含在<code>print(_:separator:terminator:)</code>的调用中，用来输出这个函数的返回值。</p>
<blockquote>
<p><strong>注意</strong></p>
<p>print(_:separator:terminator:)函数的第一个参数并没有设置一个标签，而其他的参数因为已经有了默认值，因此也是可选的。关于这些函数语法上的变化详见下方关于函数参数标签和参数名以及默认参数值。</p>
</blockquote>
<p>在<code>greet(person:)</code>的函数体中，先定义了一个新的名为<code>greeting</code>的<code>String</code>常量，同时，把对<code>personName</code>的问候消息赋值给了<code>greeting</code>。然后用<code>return</code>关键字把这个问候给返回出去。一旦<code>return greeting</code>被调用，该函数结束它的执行并返回<code>greeting</code>的当前值。</p>
<p>为了简化这个定义，可以将问候消息的创建和返回写成一句：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">greetAgain</span>(person: String) -&gt; String {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Hello again, &#34;</span> <span style="color:#f92672">+</span> person <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;!&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>print(greetAgain(person: <span style="color:#e6db74">&#34;Jensen&#34;</span>))  <span style="color:#75715e">// 打印输出&#34;Hello again, Jensen!&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>output: Hello again, Jensen!
</span></span></code></pre></div><hr>
<h2 id="函数参数与返回值">函数参数与返回值</h2>
<p>函数参数与返回值在<code>Swift</code>中非常灵活。可以定义任何类型的函数，包括从只带一个未名参数的简单函数到复杂的带有表达性参数名和不同参数选项的复杂函数。</p>
<h3 id="无参数函数">无参数函数</h3>
<p>函数可以没有参数，下面这个函数就是一个无参数函数，当被调用时，它返回固定的<code>String</code>消息：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">sayHelloWorld</span>() -&gt; String {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Hello, World!&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>print(sayHelloWorld())  <span style="color:#75715e">// 打印输出&#34;Hello, World!&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>output: Hello, World!
</span></span></code></pre></div><p>尽管这个函数没有参数，但是定义中在函数名后面还是需要一对圆括号。当被调用时，也需要在函数名后面写一对圆括号。</p>
<h3 id="多参数函数">多参数函数</h3>
<p>函数可以有多种输入参数，这些参数被包含在函数的圆括号中，以逗号分隔。</p>
<p>下面这个函数用一个人名和是否已经打过招呼作为输入，并返回对这个人的适当的问候语：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">greet</span>(person: String, alreadyGreeted: Bool) -&gt; String {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> alreadyGreeted {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> greetAgain(person: person)
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> greet(person: person)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>print(greet(person: <span style="color:#e6db74">&#34;Jensen&#34;</span>, alreadyGreeted: <span style="color:#66d9ef">true</span>))  <span style="color:#75715e">// 打印输出&#34;Hello again, Jensen!&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>output: Hello again, Jensen!
</span></span></code></pre></div><p>可以通过在括号内使用逗号分隔来传递一个<code>String</code>参数值和一个标识为<code>alreadyGreeted</code>的<code>Bool</code>值，来调用<code>greet(person:alreadyGreeted:)</code>函数。注意这个函数和上面<code>greet(person:)</code>是不同的。虽然，它们都有着同样的名字<code>greet</code>，但是<code>greet(person:alreadyGreeted:)</code>函数需要两个参数，而<code>greet(person:)</code>只需要一个参数。</p>
<h3 id="无返回值函数">无返回值函数</h3>
<p>函数可以没有返回值。下面是<code>greet(person:)</code>函数的另一个版本<code>greets</code>，这个函数直接打印一个<code>String</code>值，而不是返回它：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">greets</span>(person: String) {
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;Hello, </span><span style="color:#e6db74">\(</span>person<span style="color:#e6db74">)</span><span style="color:#e6db74">!&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>greets(person: <span style="color:#e6db74">&#34;Jensen&#34;</span>)  <span style="color:#75715e">// 打印输出&#34;Hello, Jensen!&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>output: Hello, Jensen!
</span></span></code></pre></div><p>因为这个函数不需要返回值，所以这个函数的定义中没有返回箭头<code>-&gt;</code>和返回类型。</p>
<blockquote>
<p><strong>注意</strong></p>
<p>严格地说，即使没有明确定义返回值，该greet(person:)函数依然返回一个值。没有明确定义返回类型的函数返回一个Void类型的特殊值，该值为一个空元组，写成()。</p>
</blockquote>
<p>调用函数时，可以忽略该函数的返回值：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">printAndCount</span>(string: String) -&gt; Int {
</span></span><span style="display:flex;"><span>    print(string)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> string.count
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">printWithoutCounting</span>(string: String) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> _ = printAndCount(string: string)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>printAndCount(string: <span style="color:#e6db74">&#34;Hello, World&#34;</span>)  <span style="color:#75715e">// 打印输出&#34;Hello, World&#34;，并且返回值12</span>
</span></span><span style="display:flex;"><span>printWithoutCounting(string: <span style="color:#e6db74">&#34;Hello, World&#34;</span>)  <span style="color:#75715e">// 打印输出&#34;Hello, World&#34;，但是没有任何返回值</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>output: Hello, World
</span></span><span style="display:flex;"><span>Hello, World
</span></span></code></pre></div><p>第一个函数<code>printAndCount(string:)</code>，输出一个字符串并返回<code>Int</code>类型的字符数。第二个函数<code>printWithoutCounting(string:)</code>调用了第一个函数，但是却忽略了它的返回值，当第二个函数被调用时，消息依然会由第一个函数输出，但是返回值不会被用到。</p>
<blockquote>
<p><strong>注意</strong></p>
<p>返回值可以被忽略，但是定义了又返回值的函数必须返回一个值，如果在函数定义底部没有返回任何值，将导致编译错误。</p>
</blockquote>
<h3 id="多重返回值函数">多重返回值函数</h3>
<p>可以使用元组（tuple）类型让多个值作为一个复合值从函数中返回。</p>
<p>下例中定义了一个名为<code>minMax(array:)</code>的函数，作用是一个<code>Int</code>类型的数组中找出最小值与最大值。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">minMax</span>(array: [Int]) -&gt; (min: Int, max: Int) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> currentMin = array[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> currentMax = array[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> value <span style="color:#66d9ef">in</span> array[<span style="color:#ae81ff">1.</span>.&lt;array.count] {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> value <span style="color:#f92672">&lt;</span> currentMin {
</span></span><span style="display:flex;"><span>            currentMin = value
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> value <span style="color:#f92672">&gt;</span> currentMax {
</span></span><span style="display:flex;"><span>            currentMax = value
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> (currentMin, currentMax)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>minMax(array:)</code>函数返回一个包含两个<code>Int</code>值的元组，这些值被标记为<code>min</code>和<code>max</code>，以便查询函数的返回值可以通过名字来访问它们。</p>
<p>在<code>minMax(array:)</code>的函数体中，在开始的时候设置两个工作变量<code>currentMin</code>和<code>currentMax</code>的值作为数组中的第一个数。然后函数会遍历数组中剩余的值并检查该值是否比<code>currentMin</code>和<code>currentMax</code>更小或更大。最后数组中的最小值和最大值作为一个包含两个<code>Int</code>值的元组返回。</p>
<p>因为元组的成员值已经被命名，因此可以通过<code>.</code>语法访问检索到的最小值与最大值：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> bounds = minMax(array: [<span style="color:#ae81ff">8</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">109</span>, <span style="color:#ae81ff">3</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">71</span>])
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;Min is </span><span style="color:#e6db74">\(</span>bounds.min<span style="color:#e6db74">)</span><span style="color:#e6db74"> and max is </span><span style="color:#e6db74">\(</span>bounds.max<span style="color:#e6db74">)</span><span style="color:#e6db74">.&#34;</span>)  <span style="color:#75715e">// 打印输出&#34;Min is -71 and max is 109.&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>output: Min <span style="color:#66d9ef">is</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">71</span> and max <span style="color:#66d9ef">is</span> <span style="color:#ae81ff">109.</span>
</span></span></code></pre></div><p>需要注意的是，元组的成员不需要在元组从函数中返回时命名，因为它们的名字已经在函数返回类型中指定了。</p>
<h3 id="可选元组返回类型">可选元组返回类型</h3>
<p>如果函数返回的元组类型有可能整个元组都“没有值”，可以使用可选的元组返回类型反映整个元组可以是<code>nil</code>的事实。可以通过在元组类型的右括号后面放置一个问号来定义一个可选元组，例如<code>(Int, Int)?</code>或<code>(String, Int, Bool)?</code></p>
<blockquote>
<p><strong>注意</strong></p>
<p>可选元组类型如(Int, Int)?与元组包含可选类型如(Int?, Int?)是不同的。可选的元组类型，整个元组是可选的，而不只是元组中每个元素值。</p>
</blockquote>
<p>前面的<code>minMax(array:)</code>函数返回了一个包含两个<code>Int</code>值的元组。但是函数不会对传入的数组执行任何安全检查，如果<code>array</code>参数是一个空数组，如上定义的<code>minMax(array:)</code>在试图访问<code>array[0]</code>时会触发一个运行时的错误。</p>
<p>为了安全地处理这个“空数组”问题，将<code>minMax(array:)</code>函数改写为使用可选元组返回类型，并且当数组为空时返回<code>nil</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">MinMax</span>(array: [Int]) -&gt; (min: Int, max: Int)? {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> array.isEmpty {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> currentMin = array[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> currentMax = array[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> value <span style="color:#66d9ef">in</span> array[<span style="color:#ae81ff">1.</span>.&lt;array.count] {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> value <span style="color:#f92672">&lt;</span> currentMin {
</span></span><span style="display:flex;"><span>            currentMin = value
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> value <span style="color:#f92672">&gt;</span> currentMax {
</span></span><span style="display:flex;"><span>            currentMax = value
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> (currentMin, currentMax)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>可以使用可选绑定来检查<code>minMax(array:)</code>函数返回的是一个存在的元组值还是<code>nil</code>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> bounds = MinMax(array: [<span style="color:#ae81ff">8</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">109</span>, <span style="color:#ae81ff">3</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">71</span>]) {
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;Min is </span><span style="color:#e6db74">\(</span>bounds.min<span style="color:#e6db74">)</span><span style="color:#e6db74"> and max is </span><span style="color:#e6db74">\(</span>bounds.max<span style="color:#e6db74">)</span><span style="color:#e6db74">.&#34;</span>)
</span></span><span style="display:flex;"><span>}  <span style="color:#75715e">// 打印&#34;Min is -71 and max is 109.&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> bounds = MinMax(array: []) {
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;Min is </span><span style="color:#e6db74">\(</span>bounds.min<span style="color:#e6db74">)</span><span style="color:#e6db74"> and max is </span><span style="color:#e6db74">\(</span>bounds.max<span style="color:#e6db74">)</span><span style="color:#e6db74">.&#34;</span>)
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;Array is null.&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>output: Min <span style="color:#66d9ef">is</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">71</span> and max <span style="color:#66d9ef">is</span> <span style="color:#ae81ff">109.</span>
</span></span><span style="display:flex;"><span>Array <span style="color:#66d9ef">is</span> null.
</span></span></code></pre></div><h3 id="隐式返回的函数">隐式返回的函数</h3>
<p>如果一个函数的整个函数体是一个单行表达式，这个函数可以隐式地返回这个表达式。举个例子，以后的函数有着同样地作用：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">greeting</span>(<span style="color:#66d9ef">for</span> person: String) -&gt; String {
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Hello, &#34;</span> <span style="color:#f92672">+</span> person <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;!&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>print(greeting(<span style="color:#66d9ef">for</span>: <span style="color:#e6db74">&#34;Jensen&#34;</span>))  <span style="color:#75715e">// 打印输出&#34;Hello, Jensen!&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">anotherGreeting</span>(<span style="color:#66d9ef">for</span> person: String) -&gt; String {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Hello, &#34;</span> <span style="color:#f92672">+</span> person <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;!&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>print(anotherGreeting(<span style="color:#66d9ef">for</span>: <span style="color:#e6db74">&#34;Jensen&#34;</span>))  <span style="color:#75715e">// 打印输出&#34;Hello, Jensen!&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>output: Hello, Jensen!
</span></span><span style="display:flex;"><span>Hello, Jensen!
</span></span></code></pre></div><p><code>greeting(for:)</code>函数的完整定义是打招呼内容的返回，这就意味着它能使用隐式返回这样更简短的形式。<code>anotherGreeting(for:)</code>函数返回同样的内容，却因为<code>return</code>关键字显得函数更长。任何一个可以背写成一行<code>return</code>语句的函数都可以忽略<code>return</code>。</p>
<p>正如将会在“简略的Getter声明”里看到的，一个属性的<code>getter</code>也可以使用隐式返回的形式。</p>
<hr>
<h2 id="函数参数标签和参数名称">函数参数标签和参数名称</h2>
<p>每个函数参数都有一个参数标签（Argument Label）以及一个参数名称（Parameter Name）。参数标签在调用函数的时候使用；调用的时候需要将函数的参数标签写在对应的参数前面。参数名称在函数的实现中使用，默认情况下，函数参数使用参数名称来作为它们的参数标签。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">someFunction</span>(firstParameterName: Int, secondParameterName: Int) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 在函数体内，firstParameterName和secondParameterName代表参数中第一个和第二个参数值</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>someFunction(firstParameterName: <span style="color:#ae81ff">1</span>, secondParameterName: <span style="color:#ae81ff">2</span>)
</span></span></code></pre></div><p>所有的参数都必须有一个独一无二的名字。虽然多个参数拥有同样的参数标签是有可能的，但是一个唯一的参数标签能够使得代码更具可读性。</p>
<h3 id="指定参数标签">指定参数标签</h3>
<p>可以在参数名称前指定它的参数标签，中间以空格分隔：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">someFunction</span>(argumentLabel parameterName: Int) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 在函数体内，parameterName代表参数值</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>下面版本的<code>greet(person:)</code>函数，接收一个人的名字和它的家乡，并返回一句问候：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">greet</span>(person: String, from hometown: String) -&gt; String {
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Hello </span><span style="color:#e6db74">\(</span>person<span style="color:#e6db74">)</span><span style="color:#e6db74">! Glad you could visit from </span><span style="color:#e6db74">\(</span>hometown<span style="color:#e6db74">)</span><span style="color:#e6db74">.&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>print(greet(person: <span style="color:#e6db74">&#34;Jensen&#34;</span>, from: <span style="color:#e6db74">&#34;Hefei&#34;</span>))  <span style="color:#75715e">// 打印输出&#34;Hello Jensen! Glad you could visit from Hefei.&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>output: Hello Jensen! Glad you could visit from Hefei.
</span></span></code></pre></div><p>参数标签的使用能够让一个函数在调用时更具有表达力，更类似自然语言，并且仍然保持了函数内部的可读性以及清晰的意图。</p>
<h3 id="忽略参数标签">忽略参数标签</h3>
<p>如果不希望为某个参数添加一个标签，可以使用一个下划线<code>_</code>来替代一个不明确的参数标签。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">someFunction</span>(<span style="color:#66d9ef">_</span> firstParameterName: Int, secondParameterName: Int) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 在函数体内，firstParameterName和secondParameterName代表参数中第一个和第二个参数值</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>someFunction(<span style="color:#ae81ff">1</span>, secondParameterName: <span style="color:#ae81ff">2</span>)
</span></span></code></pre></div><p>如果一个参数有一个标签，那么在调用的时候必须使用参数标签来标记这个参数。</p>
<h3 id="默认参数值">默认参数值</h3>
<p>可以在函数体中通过给参数赋值来为任意一个参数定义默认值（Default Value），当默认值被定义后，调用这个函数时可以忽略这个参数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">someFunction</span>(parameterWithoutDefault: Int, parameterWithDeafult: Int = <span style="color:#ae81ff">12</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 如果在调用时候不传第二个参数，parameterWithDefault会被默认赋值为12传入到函数体中。</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>someFunction(parameterWithoutDefault: <span style="color:#ae81ff">1</span>)  <span style="color:#75715e">// parameterWithDefault的值为12</span>
</span></span><span style="display:flex;"><span>someFunction(parameterWithoutDefault: <span style="color:#ae81ff">2</span>, parameterWithDeafult: <span style="color:#ae81ff">6</span>)  <span style="color:#75715e">// parameterWithDefault的值为6</span>
</span></span></code></pre></div><p>将不带有默认值的参数放在函数参数列表的最前，一般来说，没有默认值的参数更加的重要，将不带默认值的参数放在最前面保证在函数调用时，翡默认参数的顺序是一致的，同时也使得相同的函数在不同情况下调用时显得更为清晰。</p>
<h3 id="可变参数">可变参数</h3>
<p>一个可变参数（Variadic Parameter）可以接受零个或多个值。函数调用时，可以用可变参数来指定函数参数可以被传入不确定数量的输入值。通过在变量类型名后面加入<code>...</code>的方式来定义可变参数。</p>
<p>可变参数的传入值在函数体中变为此类型的一个数组。例如，一个叫做<code>numbers</code>的<code>Double...</code>型可变参数，在函数体内可以当做一个<code>numbers</code>的<code>[Double]</code>型数组常量。</p>
<p>下面的这个函数用来计算一组任意长度数字的算术平均数（Arithmetic Mean）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">arithmeticMean</span>(<span style="color:#66d9ef">_</span> numbers: Double...) -&gt; Double {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> total: Double = <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> number <span style="color:#66d9ef">in</span> numbers {
</span></span><span style="display:flex;"><span>        total <span style="color:#f92672">+=</span> number
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> total <span style="color:#f92672">/</span> Double(numbers.count)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>print(arithmeticMean(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>))  <span style="color:#75715e">// 打印输出3.0，是这五个数的平均数</span>
</span></span><span style="display:flex;"><span>print(arithmeticMean(<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">8.25</span>, <span style="color:#ae81ff">18.75</span>))  <span style="color:#75715e">// 打印输出10.0，是这三个数的平均数</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>output: <span style="color:#ae81ff">3.0</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10.0</span>
</span></span></code></pre></div><p>一个函数能拥有多个可变参数。可变参数后的第一个行参前必须加上实参标签。实参标签用于区分实参是传递给可变参数还是后面的行参。</p>
<h3 id="输入输出参数">输入输出参数</h3>
<p>函数参数默认是常量。试图在函数体中更改参数值将会导致编译错误。这意味着不能错误地更改参数值。如果想要一个函数可以修改参数的值，并且想要这些修改在函数调用结束后仍然存在，那么就需要把这个参数定义为输入输出参数（In-Out Parameters）。</p>
<p>定义一个输入输出参数时，在参数定义前加上<code>inout</code>关键字，一个输入输出参数有传入函数的的值，这个值被函数修改，然后被传出函数，替换原来的值。想获取更多的关于输入输出参数的细节和相关的编译器优化，请查看输入输出参数一节。</p>
<p>只能传递变量给输入输出参数，不能传入常量或者字面量，因为这些量是不能够被修改的。当传入的参数作为输入输出参数时，需要在参数名前加上<code>&amp;</code>符，表示这个值可以被函数修改。</p>
<blockquote>
<p><strong>注意</strong></p>
<p>输入输出参数不能有默认值，而且可变参数不能用inout标记。</p>
</blockquote>
<p>下例中，<code>swapTwoInts(_:_:)</code>函数有两个分别叫做<code>a</code>和<code>b</code>的输入输出参数：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">swapTwoInts</span>(<span style="color:#66d9ef">_</span> a: <span style="color:#66d9ef">inout</span> Int, <span style="color:#66d9ef">_</span> b: <span style="color:#66d9ef">inout</span> Int) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> temporaryA = a
</span></span><span style="display:flex;"><span>    a = b
</span></span><span style="display:flex;"><span>    b = temporaryA
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>swapTwoInts(_:_:)</code>函数简单地交换<code>a</code>和<code>b</code>的值。该函数先将<code>a</code>的值存到一个临时常量<code>temporaryA</code>中，然后将<code>b</code>的值赋给<code>a</code>，最后将<code>temporaryA</code>赋值给<code>b</code>。</p>
<p>可以用两个<code>Int</code>型变量来调用<code>swapTwoInts(_:_:)</code>。需要注意的是，<code>someInt</code>和<code>anotherInt</code>在传入<code>swapTwoInts(_:_:)</code>函数前，都加了<code>&amp;</code>的前缀。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> someInt = <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> anotherInt = <span style="color:#ae81ff">107</span>
</span></span><span style="display:flex;"><span>swapTwoInts(&amp;someInt, &amp;anotherInt)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;SomeInt is now </span><span style="color:#e6db74">\(</span>someInt<span style="color:#e6db74">)</span><span style="color:#e6db74">, and anotherInt is now </span><span style="color:#e6db74">\(</span>anotherInt<span style="color:#e6db74">)</span><span style="color:#e6db74">!&#34;</span>)  <span style="color:#75715e">// 打印输出&#34;SomeInt is now 107, and anotherInt is now 3!&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>output: SomeInt <span style="color:#66d9ef">is</span> now <span style="color:#ae81ff">107</span>, and anotherInt <span style="color:#66d9ef">is</span> now <span style="color:#ae81ff">3</span>!
</span></span></code></pre></div><p>从上面这个例子中，可以看到<code>someInt</code>和<code>anotherInt</code>的原始值在<code>swapTwoInts(_:_:)</code>函数中被修改，尽管它们的定义在函数体外。</p>
<blockquote>
<p><strong>注意</strong></p>
<p>输入输出参数和返回值是不一样的。上面的swapTwoInts函数并没有定义任何返回值，但仍然修改了someInt和anotherInt的值。输入输出参数是函数对函数体外产生影响的另一种方式。</p>
</blockquote>
<hr>
<h3 id="函数类型">函数类型</h3>
<p>每个函数都有种特定的函数类型，函数的类型由函数的参数类型和返回类型组成。例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">addTwoInts</span>(<span style="color:#66d9ef">_</span> a: Int, <span style="color:#66d9ef">_</span> b: Int) -&gt; Int {
</span></span><span style="display:flex;"><span>    a <span style="color:#f92672">+</span> b
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">multiplyTwoInts</span>(<span style="color:#66d9ef">_</span> a: Int, <span style="color:#66d9ef">_</span> b: Int) -&gt; Int {
</span></span><span style="display:flex;"><span>    a <span style="color:#f92672">*</span> b
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>这个例子中定义了两个简单的数学函数：<code>addTwoInts</code>和<code>multiplyTwoInts</code>。这两个函数都接收两个<code>Int</code>值，返回一个<code>Int</code>值。</p>
<p>这两个函数的类型是<code>(Int, Int) -&gt; Int</code>，可以解读为：</p>
<ul>
<li>“这个函数类型有两个Int型的参数并返回一个Int型的值”。</li>
</ul>
<p>下面是另一个例子，一个没有参数，也没有返回值的函数：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">printHelloWorld</span>() {
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;Hello, world!&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>这个函数的类型是：<code>() -&gt; Void</code>，或者叫“没有参数，并返回Void类型的函数”。</p>
<h3 id="使用函数类型">使用函数类型</h3>
<p>在<code>Swift</code>中，使用函数类型就像使用其他类型一样。例如，可以定义一个类型为函数的常量或变量，并将适当的函数赋值给它。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> mathFunc: (Int, Int) -&gt; Int = addTwoInts
</span></span></code></pre></div><p>这段代码可以被解读为：</p>
<ul>
<li>“定义一个叫做mathFunc的变量，类型是‘一个有两个Int型的参数并返回一个Int型的值的函数’，并让这个新变量指向addTwoInts函数”。</li>
</ul>
<p><code>addTwoInts</code>和<code>mathFunc</code>有同样的类型，所以这个赋值过程在<code>Swift</code>类型检查（Type-Check）中是允许的。</p>
<p>现在可以使用<code>mathFunc</code>来调用被赋值的函数了：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;Result: </span><span style="color:#e6db74">\(</span>mathFunc<span style="color:#e6db74">(</span><span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span><span style="color:#e6db74">))</span><span style="color:#e6db74">.&#34;</span>)  <span style="color:#75715e">// 打印输出&#34;Result: 5.&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>output: Result: <span style="color:#ae81ff">5.</span>
</span></span></code></pre></div><p>有相同匹配类型的不同函数可以被赋值给同一个变量，就像非函数类型的变量一样：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span>mathFunc = multiplyTwoInts
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;Result: </span><span style="color:#e6db74">\(</span>mathFunc<span style="color:#e6db74">(</span><span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span><span style="color:#e6db74">))</span><span style="color:#e6db74">.&#34;</span>)  <span style="color:#75715e">// 打印输出&#34;Result: 6.&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>output: Result: <span style="color:#ae81ff">6.</span>
</span></span></code></pre></div><p>就像其他类型一样，当赋值一个函数给常量或者变量时，可以让<code>Swift</code>来推断其函数类型：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> anotherMathFunc = addTwoInts
</span></span><span style="display:flex;"><span><span style="color:#75715e">// anotherMathFunc被推断为(Int, Int) -&gt; Int类型</span>
</span></span></code></pre></div><h3 id="函数类型作为参数类型">函数类型作为参数类型</h3>
<p>可以用<code>(Int. Int) -&gt; Int</code>这样的函数类型作为另一个函数的参数类型，这样可以将函数的一部分实现留给函数的调用者来提供：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">printMathResult</span>(<span style="color:#66d9ef">_</span> mathFunc: (Int, Int) -&gt; Int, <span style="color:#66d9ef">_</span> a: Int, <span style="color:#66d9ef">_</span> b: Int) {
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;Result: </span><span style="color:#e6db74">\(</span>multiplyTwoInts<span style="color:#e6db74">(</span>a, b<span style="color:#e6db74">))</span><span style="color:#e6db74">. &#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>printMathResult(mathFunc, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">2</span>)  <span style="color:#75715e">// 打印输出&#34;Result: 16.&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>output: Result: <span style="color:#ae81ff">16.</span> 
</span></span></code></pre></div><p>这个例子定义了<code>printMathResult(_:_:_:)</code>函数，它有三个参数：第一个参数叫<code>mathFunc</code>，类型是<code>(Int, Int) -&gt; Int</code>，可以传入任何这种类型的函数；第二个和第三个参数叫<code>a</code>和<code>b</code>，它们的类型都是<code>Int</code>，这两个值作为已给出的函数的输入值。</p>
<p>当<code>printMathResult(_:_:_:)</code>被调用时，它被传入<code>multiplyTwoInts</code>函数和整数8和2.它用传入的8和2调用<code>multiplyTwoInts</code>，并输出结果16。</p>
<p><code>printMathResult(_:_:_:)</code>函数的作用就是输出另一个适当类型的数学函数的调用结果。它不关心传入函数是如何实现的，只关心传入的函数是不是一个正确的类型，这使得<code>printMathResult(_:_:_:)</code>能以一种类型安全（Type—Safe）的方式将一部分功能转给调用者实现。</p>
<h3 id="函数类型作为返回类型">函数类型作为返回类型</h3>
<p>可以用函数类型作为另一个函数的返回类型，需要做的是在返回箭头<code>-&gt;</code>后写一个完整的函数类型。</p>
<p>下面的这个例子中定义了两个简单函数，分别是<code>stepForward(_:)</code>和<code>stepBackward(_:)</code>。<code>stepForward(_:)</code>函数返回一个比输入值大1的值，<code>stepBackward(_:)</code>返回一个比输入值小1的值，这两个函数的类型都是<code>(Int) -&gt; Int</code>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">stepForward</span>(<span style="color:#66d9ef">_</span> input: Int) -&gt; Int {
</span></span><span style="display:flex;"><span>    input <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">stepBackward</span>(<span style="color:#66d9ef">_</span> input: Int) -&gt; Int {
</span></span><span style="display:flex;"><span>    input <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>如下名为<code>chooseStepFunc(backward:)</code>的函数，它的返回类型是<code>(Int) -&gt; Int</code>类型的函数。<code>chooseStepFunc(backward:)</code>函数根据布尔值<code>backward</code>来返回<code>stepForward(_:)</code>函数或<code>stepBackward(_:)</code>函数：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">chooseStepFunc</span>(backward: Bool) -&gt; (Int) -&gt; Int {
</span></span><span style="display:flex;"><span>    backward ? stepBackward : stepForward
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>现在可以用<code>chooseStepFunc(backward:)</code>来获得两个函数其中的一个：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">var</span>  currentValue = <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> moveNearerToZero = chooseStepFunc(backward: currentValue <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>)
</span></span></code></pre></div><p>上面这个例子中计算出<code>currentValue</code>逐渐接近到0是需要向正数走还是向负数走。<code>currentValue</code>的初始值是3，这意味着<code>currentValue &gt; 0</code>为真（True），这使得<code>chooseStepFunc(backward:)</code>返回<code>stepBackward(_:)</code>函数。一个指向返回函数的引用保存在了<code>moveNearerToZero</code>常量中。</p>
<p>现在，<code>moveNearerToZero</code>指向了正确的函数，它可以被用来数到零：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;Counting to zero:&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Counting to zero:</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> currentValue <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>currentValue<span style="color:#e6db74">)</span><span style="color:#e6db74">...&#34;</span>)
</span></span><span style="display:flex;"><span>    currentValue = moveNearerToZero(currentValue)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;Zero!&#34;</span>)  <span style="color:#75715e">// 3...  // 2...  // 1...  // Zero!</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>output: Counting to zero:
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3.</span>..
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2.</span>..
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1.</span>..
</span></span><span style="display:flex;"><span>Zero!
</span></span></code></pre></div><hr>
<h2 id="嵌套函数">嵌套函数</h2>
<p>到目前为止，本章中所见到的所有函数都叫全局函数（Global Functions），它们定义在全局域中。也可以吧函数定义在别的函数体中，称作嵌套函数（Nested Functions）。</p>
<p>默认情况下，嵌套函数是对外界不可见的，但是可以被他们的外围函数（Enclosing Function）调用。一个外围函数也可以返回它的某一个嵌套函数，使得这个函数可以在其他域中被使用。</p>
<p>可以用返回嵌套函数的方式去重写<code>chooseStepFunc(backward:)</code>函数（chooseStepFunction()）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Swift" data-lang="Swift"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">chooseStepFunction</span>(backward: Bool) -&gt; (Int) -&gt; Int {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">stepForward</span>(input: Int) -&gt; Int { <span style="color:#66d9ef">return</span> input <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">stepBackward</span>(input: Int) -&gt; Int { <span style="color:#66d9ef">return</span> input <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> backward ? stepBackward(input:) : stepForward(input:)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> CurrentValue = <span style="color:#f92672">-</span><span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> MoveNearerToZero = chooseStepFunction(backward: currentValue <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>)  <span style="color:#75715e">// moveNearerToZero now refers to the nested stepForward() function</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> CurrentValue <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>CurrentValue<span style="color:#e6db74">)</span><span style="color:#e6db74">...&#34;</span>)
</span></span><span style="display:flex;"><span>    CurrentValue = MoveNearerToZero(CurrentValue)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;Zero!&#34;</span>)  <span style="color:#75715e">// -4...  // -3...  // -2...  // -1...  // Zero!</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>output: <span style="color:#f92672">-</span><span style="color:#ae81ff">4.</span>..
</span></span><span style="display:flex;"><span><span style="color:#f92672">-</span><span style="color:#ae81ff">3.</span>..
</span></span><span style="display:flex;"><span><span style="color:#f92672">-</span><span style="color:#ae81ff">2.</span>..
</span></span><span style="display:flex;"><span><span style="color:#f92672">-</span><span style="color:#ae81ff">1.</span>..
</span></span><span style="display:flex;"><span>Zero!
</span></span></code></pre></div>
    <div class="CornerButtons">
        <div class="CornerAnimayedFlex">
            <div class="CornerButton" title="Back to the top">
                <a href="#top" class="cba fas fa-hand-middle-finger" ></a>
            </div>
        </div>
    </div>

<hr>

<h1 style="color: #1f71e0;">Comments</h1>
<script defer src="https://utteranc.es/client.js" 
repo="Jen-Jon/Jen-Jon.github.io" 
issue-term="title" 
theme="github-light" 
crossorigin="anonymous" async></script>


</div>

<h5 style="text-align: center; font-size: large;">This blog is licensed under <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/">CC BY-NC-ND 4.0</a>, please indicate the source for non-commercial reposted.</h5>


        </div><strong id="footer" class="mb-5">
    <hr>
    
    <div class="container text-center">
        
            <a href="https://github.com/Jen-Jon/" class="fab fa-github fa-1x" title="Github" style="text-decoration: none;"></a>
        
            <a href="https://hub.docker.com/u/ijerry22" class="fab fa-docker fa-1x" title="DockerHub" style="text-decoration: none;"></a>
        
            <a href="https://www.researchgate.net/profile/Jingyao-Zhang-4" class="fab fa-researchgate fa-1x" title="researchgate" style="text-decoration: none;"></a>
        
            <a href="mailto:jensen.acm@gmail.com" class="fas fa-envelope fa-1x" title="E-mail" style="text-decoration: none;"></a>
        
    </div>
    
        <div class="container text-center">
            <h5 class="text-center" style="font-size: small;">Copyright © 2020-2024 <a href="https://github.com/Jen-Jon/" style="color: #1f71e0;" title="Jensen-Jon">Jensen-Jon</a>. All rights reserved.</h5>
        </div>
    
</div>
</body>
</html>
