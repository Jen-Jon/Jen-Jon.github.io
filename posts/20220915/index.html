<!DOCTYPE html>
<html lang=""><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>科学上网</title>
    <meta name="description" content="A simple homepage of Jensen Zhang.">
    <meta name="author" content='Jensen Zhang'>

    <link href="https://cdn.jsdelivr.net/gh/Jen-Jon/CDN_Bank/srcs/bloglayouts/homepage_css2.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/Jen-Jon/CDN_Bank/srcs/bloglayouts/buttonsstyle.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous">

    <script defer src="https://cdn.jsdelivr.net/gh/Jen-Jon/CDN_Bank/srcs/bloglayouts/backbutton.js"></script>
    <script async src="https://cdn.jsdelivr.net/gh/Jen-Jon/CDN_Bank/srcs/bloglayouts/busuanzi.pure.mini.js"></script>

    
    <script>
        WIDGET = {
        "CONFIG": {
            "modules": "0124",
            "background": "5",
            "tmpColor": "fff",
            "tmpSize": "16",
            "tmpPadding": "10px",
            "cityColor": "000",
            "citySize": "16",
            "aqiColor": "fff",
            "aqiSize": "16",
            "weatherIconSize": "24",
            "alertIconSize": "18",
            "padding": "0px",
            
            "language": "en",
            "key": "06a49925209149af84e325a6c7e5c521"
        }
        }
    </script>
    <script src="https://cdn.jsdelivr.net/gh/Jen-Jon/CDN_Bank/srcs/qweather/he-simple-common-v2.0.2.js"></script>
    

    
    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?a4cacad7bf6ee4f58534d26d5b23ad14";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
    </script>
    

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.0/fuse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/Jen-Jon/CDN_Bank/srcs/bloglayouts/search-v1.3.js"></script>

    
    <script id="search-result-template" type="text/x-js-template">
        <article id="summary-${key}">
            <header>
                <h3><i class="fas fa-file-alt"></i> <a href="${link}">${title}</a></h3>
                <h4>${date} | ${type} blog | ${tags}</h4>
            </header>
            <div>
                <div>${snippet}...</div>
                
                <div class="ReadButton">
                    <a class="read-more-link ReadButton_a" href="https://jen-jon.github.io/posts/20220915/">
                        <strong style="color: #fff;">Read More</strong>
                    </a>
                </div>
                
            </div>
            <hr>
        </article>
    </script>

    
    <link rel="stylesheet" href="/sass/researcher.min.css">

    
        <link rel="icon" type="image/ico" href="https://jen-jon.github.io/images/favicon.ico">
    

    
        
    
</head>

    <body><div id="ukraine" style="background-color: #1f71e0; ">
    <a class="cba fas fa-window-close" onclick="test()" style="display:block; float:right; width:30px; height:29px;" href="#"></a>
    <div style="height: 50px; display: flex; text-align: center; justify-content: center; align-items: center;">
        <div style="margin: 0 10px;">
            <div style="font-size: 45px;">🇺🇦</div>
        </div>
        <div style="margin: 0 10px;">
            <a style="color: white;" href="/we-stand-with-ukraine">
                <div style="color: white; font-weight: bold; font-size: large;">We stand with Ukraine!</div>
                <div style="color: white; font-weight: bold; font-size: large;">我们支持乌克兰！</div>
            </a>
        </div>
    </div>
</div>
<script>
    function test() {
        document.getElementById("ukraine").parentElement.removeChild(document.getElementById("ukraine"));
    }
</script>

<div class="container mt-5" style="text-align: right;">
    
    <div style="display: inline-flex; background-color: #1f71e0;">
        <div style="z-index: 9999;"><div id="he-plugin-simple"></div></div>
    </div>
    
    <nav class="navbar navbar-expand-sm flex-column flex-sm-row text-nowrap p-0">
        <a class="navbar-brand mx-0 mr-sm-auto" href="https://jen-jon.github.io/" title="Jensen&#39;s Homepage">
          
          <i class="fas fa-home"></i>
          Jensen&#39;s Homepage
        </a>
        <div class="navbar-nav flex-row flex-wrap justify-content-center">
            
                
                
                    <a class="nav-item nav-link" href="/about" title="About">
                        About
                    </a>
                    
                        <span class="nav-item navbar-text mx-1">/</span>
                    
                
                    <a class="nav-item nav-link" href="/posts" title="Posts">
                        Posts
                    </a>
                    
                        <span class="nav-item navbar-text mx-1">/</span>
                    
                
                    <a class="nav-item nav-link" href="/mediatest" title="Media">
                        Media
                    </a>
                    
                        <span class="nav-item navbar-text mx-1">/</span>
                    
                
                    <a class="nav-item nav-link" href="https://cdn.jsdelivr.net/gh/Jen-Jon/CDN_Bank/srcs/Resumes/Resume_of_Jensen.pdf" title="Resume/CV">
                        Resume/CV
                    </a>
                    
                
            
        </div>
    </nav>
</div>
<hr><div id="content">
<div class="container">
    
    <h1 style="color: #1f71e0;">科学上网</h1>
    
    <h5><a href="https://haoel.github.io/">Reposted</a> by <a href="https://jen-jon.github.io/">Jensen Zhang</a> on <em>September 15, 2022</em> | <spa id="busuanzi_container_page_pv"><i class="fas fa-eye"></i> <em><span id="busuanzi_value_page_pv"></span></em> readings</span> </h5>
    
    <h5>This article is about <em style="color: #1f71e0;">11967</em> words and may take <em style="color: #1f71e0;">24</em> minutes to read.</h5>
    <hr>
    
    
    <p><img src="https://cdn.jsdelivr.net/gh/Jen-Jon/CDN_Bank/srcs/blogstatic/20220915/title.jpg" alt="Logo"/></p>
    <hr>
    
    
    <blockquote>
        <p><strong>Type: technology blog</strong></p>
        <p><strong>Tags: 科学上网；飞越重洋</strong></p>
    </blockquote>
    <hr>
    
    
    <h1 style="color: #1f71e0;">Content</h1>
    <br>
    
    <p>这篇文章可以写的更好，欢迎到 <a href="https://github.com/haoel/haoel.github.io">https://github.com/haoel/haoel.github.io</a> 更新</p>
<ul>
<li><a href="#%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91">科学上网</a>
<ul>
<li><a href="#0-%E5%BA%8F">0. 序</a></li>
<li><a href="#1-%E8%8B%B1%E6%96%87%E8%83%BD%E5%8A%9B">1. 英文能力</a></li>
<li><a href="#2-%E8%B4%AD%E4%B9%B0vps">2. 购买 VPS</a>
<ul>
<li><a href="#21-%E5%B8%B8%E8%A7%84vps">2.1 常规 VPS</a></li>
<li><a href="#22-cn2-%E7%BA%BF%E8%B7%AF">2.2 CN2 线路</a></li>
<li><a href="#23-ncp-%E7%BA%BF%E8%B7%AF">2.3 NCP 线路</a></li>
</ul>
</li>
<li><a href="#3-%E6%90%AD%E5%BB%BA%E7%9B%B8%E5%85%B3%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1">3. 搭建相关代理服务</a>
<ul>
<li><a href="#31-%E8%AE%BE%E7%BD%AEdocker%E6%9C%8D%E5%8A%A1">3.1 设置 Docker 服务</a></li>
<li><a href="#32-%E5%BC%80%E5%90%AF-tcp-bbr-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%AE%97%E6%B3%95">3.2 开启 TCP BBR 拥塞控制算法</a></li>
<li><a href="#33-%E7%94%A8-gost-%E8%AE%BE%E7%BD%AE-https-%E6%9C%8D%E5%8A%A1">3.3 用 Gost 设置 HTTPS 服务</a></li>
<li><a href="#34-%E8%AE%BE%E7%BD%AE-shadowsocks-%E6%9C%8D%E5%8A%A1">3.4 设置 ShadowSocks 服务</a></li>
<li><a href="#35-%E8%AE%BE%E7%BD%AEl2tpipsec%E6%9C%8D%E5%8A%A1">3.5 设置 L2TP/IPSec 服务</a></li>
<li><a href="#36-%E8%AE%BE%E7%BD%AE-pptp-%E6%9C%8D%E5%8A%A1">3.6 设置 PPTP 服务</a></li>
</ul>
</li>
<li><a href="#4-%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AE%BE%E7%BD%AE">4. 客户端设置</a>
<ul>
<li><a href="#41-gost-%E5%AE%A2%E6%88%B7%E7%AB%AF">4.1 gost 客户端</a></li>
<li><a href="#42-shadowsocks-%E5%AE%A2%E6%88%B7%E7%AB%AF">4.2 Shadowsocks 客户端</a></li>
<li><a href="#43-vpn-%E5%AE%A2%E6%88%B7%E7%AB%AF">4.3 VPN 客户端</a></li>
</ul>
</li>
<li><a href="#5-%E6%B5%81%E9%87%8F%E4%BC%AA%E8%A3%85%E5%92%8C%E5%85%B6%E5%AE%83%E6%96%B9%E5%BC%8F">5. 流量伪装和其它方式</a>
<ul>
<li><a href="#51-v2ray">5.1 V2Ray</a></li>
<li><a href="#52-brook">5.2 Brook</a></li>
</ul>
</li>
<li><a href="#6-%E9%92%88%E5%AF%B9-ip-%E8%A2%AB%E5%B0%81%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">6. 针对 IP 被封的解决方案</a>
<ul>
<li><a href="#61-cloudflare">6.1 Cloudflare</a></li>
<li><a href="#62-v2ray">6.2 V2Ray</a></li>
<li><a href="#63-%E8%A1%A5%E5%85%85">6.3 补充</a></li>
</ul>
</li>
<li><a href="#7-%E5%AE%B6%E7%94%A8%E9%80%8F%E6%98%8E%E7%BD%91%E5%85%B3">7. 家用透明网关</a>
<ul>
<li><a href="#71-openwrt-%E8%B7%AF%E7%94%B1%E5%99%A8">7.1 OpenWRT 路由器</a></li>
<li><a href="#72-%E9%80%9A%E8%BF%87%E6%A0%91%E8%8E%93%E6%B4%BE%E5%81%9A%E6%97%81%E8%B7%AF%E7%BD%91%E5%85%B3">7.2 通过树莓派做旁路网关</a></li>
<li><a href="#73-%E5%AE%89%E8%A3%85-clash">7.3 安装 Clash</a></li>
<li><a href="#74-%E8%AE%BE%E7%BD%AE-iptables-%E8%BD%AC%E5%8F%91">7.4 设置 iptables 转发</a></li>
</ul>
</li>
<li><a href="#8-%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83%E9%80%8F%E6%98%8E%E7%BD%91%E5%85%B3">8. 数据中心透明网关</a>
<ul>
<li><a href="#81-aws-%E7%BD%91%E7%BB%9C%E6%9E%84%E5%BB%BA">8.1 AWS 网络构建</a></li>
<li><a href="#82-%E5%AE%89%E8%A3%85-clash">8.2 安装 Clash</a></li>
<li><a href="#83-%E9%85%8D%E7%BD%AE%E7%A7%81%E6%9C%89%E5%AD%90%E7%BD%91%E4%B8%AD%E7%9A%84-ec2">8.3 配置私有子网中的 EC2</a></li>
<li><a href="#84-%E7%A7%81%E6%9C%89%E5%AD%90%E7%BD%91%E4%B8%AD%E7%9A%84-kubernetes">8.4 私有子网中的 Kubernetes</a></li>
</ul>
</li>
<li><a href="#9-%E5%85%B6%E5%AE%83">9. 其它</a>
<ul>
<li><a href="#91-%E5%85%B6%E5%AE%83%E6%96%B9%E5%BC%8F">9.1 其它方式</a></li>
<li><a href="#82-%E6%90%AD%E5%BB%BA%E8%84%9A%E6%9C%AC">8.2 搭建脚本</a></li>
</ul>
</li>
<li><a href="#10-%E4%BB%A3%E7%90%86%E6%8A%80%E5%B7%A7">10. 代理技巧</a>
<ul>
<li><a href="#101-http-%E9%9A%A7%E9%81%93">10.1 HTTP 隧道</a></li>
<li><a href="#102-ssh-%E9%9A%A7%E9%81%93">10.2 SSH 隧道</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ol>
<li>序</li>
</ol>
<hr>
<p>首先，我们先明确一下，我科学上网的目的主要是为了学习、工作、交友、查资料、和丰富自己的眼界，不是其它的事。</p>
<p>对我来说，科学上网很重要，下面罗列一下需要科学上网，我才能真正学习工作和生活的网站：</p>
<ul>
<li>Youtube 和 Vimeo 上的各种大会和教学视频，除了我自己要学，我的孩子也要学。</li>
<li>Wikipedia 维基百科是我目前唯一信得过的百科全书，我在上面可以比较系统地翻阅各种词条。</li>
<li>SlideShare 上有很多的技术文档和资料的 PPT，是我的知识学习的地方。</li>
<li>Quora 问答网站，在上面有很多有趣的问答。</li>
<li>博客和论文，很多博客和论文站点都被墙了，比如：Blogspot 和 Medium。</li>
<li>Google 的各种服务，比如：Gmail, Map, Docs，Driver，照片，图片搜索，Voices，论文搜索…… 包括 Google 官方的各种技术文档……</li>
<li>一些云服务，比如：Dropbox，IFTTT，Imgur，archive.org……</li>
<li>Twitter 上 Follow 一些牛人和一些官方账号，比如：AWS、Docker……</li>
<li>社交 Facebook, Telegram, Whatsapp, Slack……，有一些我在国外的亲戚和朋友……</li>
<li>Reddit 是一个聚合网站，一个新闻和文章的集散地，你可以认为是各种频道的今日头条……</li>
<li>Pinterest 和 Instagram 上面有很多不错的图片和视频新闻，是我减压力的地方……</li>
<li>新闻，如 BBC。 BBC 是全球比较出众的媒体，有太多的有价值资源和内容了，比如纪录片、学英文……</li>
<li>编程，有很多编程的场景需要翻墙，比如，Go 语言编程时的 go get 中的很多库是放在 Google 的服务器上， 然而 Google 是全部被墙，包括 Android 和其它一些文档和资源也是一样。包括 SourceForge 的某些项目也需要科学上网，Docker Registry 也有部分被墙，还有偶尔抽风的 Github，以及不能访问的 gist……</li>
<li>…… 等等</li>
</ul>
<p>是的，我的互联网不是——全是骗子的百度、充满广告的微信朋友圈、质量低下的公众号、娱乐至死的新浪微博、只有抖机灵和 “怎么看 XX” 的知乎、毫无营养的今日头条…… 在这样的网络空间里，我真的无法生存…… 这根本不是互联网，不是为我服务的互联网，而是在消费我的互联网，是让我变傻变笨的互联网…… 我不能忍，因为它影响到了我的生存……</p>
<ol>
<li>英文能力</li>
</ol>
<hr>
<p><strong>首先，你应该对英文读写没什么问题!</strong></p>
<p>为什么这么说？<strong>这主要是针对计算机相关的知识，逻辑是这样的，如果你上了 Google 还是在用中文关键词，那么你好不容易出来了，结果又回去了，所以没什么意义。</strong> 换言之，科学上网的目的是为了进入广阔的世界范围与全世界的人交流，所以，英文是必备的，如果你英文有问题，VPN 过去的用处也不大。</p>
<p>所以，我把这个前提条件放在第一的位置，就是说—— <strong>真正的墙不是 GFW，而是人的大脑！</strong> 意思是，屏蔽你获得信息能力的不是墙，而很大一部分则是我们自己的语言能力！</p>
<ol start="2">
<li>购买 VPS</li>
</ol>
<hr>
<p>然后，你需要一个 VPS。 在这里，强烈建议通过自建的方式，可能成本会比托管的 “机场” 要高一些，而且还很麻烦，但是，在安全性方面会比较好一些。自己动手，自力更生，让人有更多的安全感。</p>
<p>（注：<em>当然，你也可以直接购买一些科学上网的服务，但我这里不推荐了，一方面是广告，另一方面通常这样的服务非常的不稳定，而且也容易被代理方做中间人攻击</em>）</p>
<p><strong>现在你买一台 VPS 也不贵了，也就是一个月 10 美金左右（70 元），我个人觉得一个月花 70 元钱不算奢侈的事，而且会让你的生活质量得得改善。当然，线路好的得需要多花一些钱。</strong>。</p>
<p>（注：<em>我现在每个月投入在科学上网上的成本大概在不到 500 元人民币左右，常备 3-5 个不同国家的 VPS，因为国内的网络路由经常性的变化，所以，为了确保总是有一条快的，所以，得多备几个</em>）。</p>
<h3 id="21-常规-vps">2.1 常规 VPS</h3>
<p>对于 VPS，下面是一些常规选项。</p>
<ul>
<li><a href="https://lightsail.aws.amazon.com/">AWS LightSail</a> 是一个非常便宜好用的服务，最低配置一个月 $3.5 美金，流量不限，目前的 Zone 不多，推荐使用日本，新加坡或美国俄勒冈（支持银联卡）</li>
<li><a href="https://aws.amazon.com/cn/">AWS EC2</a> 香港、日本或韩国申请个免费试用一年的 EC2 VPS （支持银联卡）</li>
<li><a href="https://cloud.google.com/">Google Cloud Platform</a> 提供免费试用，赠送 300 刀赠金（需要国际信用卡）</li>
<li><a href="https://www.linode.com/">Linode</a> 买个一月 USD5 刀的 VPS</li>
<li><a href="https://www.conoha.jp/zh/">Conoha</a> 上买一个日本的 VPS，一个月 900 日元 （可以支付宝）</li>
<li><a href="https://www.vultr.com/">Vultr</a> 上买一个日本的 VPS，一个月 5 刀 （可以支付宝）(注：据说被墙的 IP 太多）</li>
<li><a href="https://www.oracle.com/cloud/free/">Oracle Cloud</a> 两台 VPS 无限期使用，可选美日韩等地（需要国际信用卡）</li>
</ul>
<blockquote>
<p><strong>注意</strong></p>
<ul>
<li>
<p>在中国，因为有太多的网络提供商，所以，国内的网络也是很奇葩的，可以看到的是，不同的地方，不同的网络，到不同的国家完全不一样，而且还经常性地调整路由，所以，经常性地有时候快有时候慢，简直就是随机的。所以，像我这样要求比较高的人，一般会备 3-5 个不同国家地区的 VPS，以保障上网的速度。</p>
</li>
<li>
<p>香港网速应该是比较好的，但是香港的成本也是比较高的。台湾的网速也是不错的，日本的网速其次，新加坡再次之，然后是美国的东海岸（这里是基于北京和上海的情况）</p>
</li>
<li>
<p>日本区的网络质量并不一定很好，有时候快的飞快，但有时候会有很大的丢包率（不同的网络不一样），有时候会很慢。上述的这几个 VPS 服务商中，AWS 韩国和日本会好点，然后是 Linode，最后是 Conoha 和 Vultr（如果你有更好的，请推荐）</p>
</li>
<li>
<p>Google Cloud Platform - GCP 的香港和台湾节点也是很快的。但是你要能买 GCP 的主机，你还得先翻墙，所以，感觉有点死锁了。所以，你可能先用 Vultr（按时付费）翻墙，然后再到 GCP 上购买。</p>
</li>
</ul>
</blockquote>
<h3 id="22-cn2-线路">2.2 CN2 线路</h3>
<p>如果你需要更好更高速的网络服务（比如你要看 Youtube 的 1080P），那么，你需要下面的这些服务器资源了（价格也会高一些）</p>
<p><code>CN2</code> 和 <code>GIA</code> 是两个关键词。<strong>CN2 GIA</strong> 全称 China telecom Next Carrier Network- Global Internet Access 电信国际精品网络，特征是路由线路上骨干节点均为 59.43 开头的 IP。如果想要寻找接入 CN2 线路的国外 VPS 提供商，建议使用 <code>Next Carrier Network</code> 或者 <code>CN2</code> 这个关键词搜索即可。</p>
<p>多说一句， CN2 本身又分为两种类型：</p>
<ul>
<li>
<p><strong>CN2 GT</strong>: CN2 里属于 Global Transit 的产品 (又名 GIS-Global Internet Service)，在 CN2 里等级低，省级 / 出国节点为 <code>202.97</code> 开头，国际骨干节点有 2～4 个 <code>59.43</code> 开头的 CN2 节点。在出国线路上拥堵程度一般，相对于 163 骨干网的稍强，相比 CN2 GIA，性价比也较高。</p>
</li>
<li>
<p><strong>CN2 GIA</strong>: CN2 里属于 Global Internet Access 的产品，等级最高，省级 / 出国 / 国际骨干节点都以<code>59.43</code>开头，全程没有<code>202.97</code>开头的节点。在出国线路上表现最好，很少拥堵，理论上速度最快最稳定，当然，价格也相对 CN2 GT 偏高。</p>
</li>
</ul>
<p>关于 <code>CN2</code> 线路的主机提供商，下面罗列几个</p>
<ul>
<li><a href="https://bwh8.net/aff.php?aff=39384">搬瓦工</a> 这应该是美区最好的一个用来科学上网的 VPS 提供商了，实测飞快。购买时你需要注意 VPS 规格上的 <code>CN2</code> 和 <code>GIA</code> 的描述。（注：点击主页右上角的 <code>regisiter</code> 以后，你可以看到页面上方有两个导航条，在下面的导航条上点 <code>Services</code> -&gt; <code>Order New Services</code> 就可以看到所有的列表了。买完后，你可能需要重装一下操作系统，装成 64 位带 BBR 的 ）</li>
<li><a href="https://clientarea.gigsgigscloud.com/index.php?/cart/cloudlet-v-hk/&amp;step=0">Gigsgigscloud</a> CN2 GIA 在香港的节点是很不错的，当然，价格也很不错（建议几个人一起平摊费用）</li>
<li><a href="https://manage.hostdare.com/index.php">Hostdare</a> 的 CN2 GIA 产品也是三网直连，KVM 和 OpenVZ 两种架构，KVM 产品长期缺货</li>
</ul>
<p>更多的可以参考这篇文章《<a href="https://wzfou.com/cn2-gia-vps/">CN2 GIA VPS 主机收集整理汇总 - 电信, 联通, 移动三网 CN2 GIA 线路 VPS 主机</a>》（注：随时间推移，这篇文章的内容可能会失效）</p>
<p>重点说一下，<strong>CN2 GIA + 香港机房</strong>，你会得到巨快无比的上网速度（无论你在中国的哪个位置，无论使用哪家运营商，CN2 GIA 都是最优的），然而，香港地区的 VPS 的确是有点贵了。在 Youtube.com 上看 4K 的视频毫无压力。虽然阿里云和腾讯的也有，但是被查到的风险基本上是 100%，不建议使用，被抓了别怪我没警告过你。</p>
<h3 id="23-ncp-线路">2.3 NCP 线路</h3>
<p><strong>NCP</strong> 全称 New Cross Pacific（新跨太平洋海底光缆系统）。 2018 年 11 月底，中国到美国之间的海底光缆新开通了 NCP 线路，并且容量更大（系统设计容量超过 80Tbps），路由更少（中国上海到美国中间路由节点只有 11 个，ping 值 110ms）。</p>
<p>NCP 线路全长 13,000 公里，连接美国俄勒冈州希尔斯伯勒，连接崇明（中国大陆），南汇（中国大陆），临港（中国大陆），釜山（韩国），头城（台湾），和丸山（日本）。</p>
<p>相对于第二条中美直达海底光缆系统（跨太平洋快线，TPE），现阶段 NCP 线路的网络流量更少更稳定。特征是华东 / 中地区流量会经过 NCP 直达路由节点，IP 地址为 202.97.95.201/202。</p>
<p>关于 <code>NCP</code> 线路的主机提供商，下面罗列两个（欢迎补充）</p>
<ul>
<li><a href="https://www.50kvm.com/">50KVM VPS</a> 截止 2018 年 12 月 2 日 KVM 产品最低价格￥81.60 / 月。</li>
<li><a href="https://t667.com/">OLVPS</a> 截止 2018 年 12 月 2 日 KVM 产品最低价格 ¥22 / 月。（<strong>特别注意</strong> ： 在 OLVPS 上的《<a href="https://olvps.com/index.php?rp=/knowledgebase/1/TOS.html">服务条款</a>》 中有一条说明：“<strong>禁止 OpenV_P_N/Socks5/PPTP/L2TP 等软件、公共代理</strong>”，所以，可能 OLPVS 并不太适合）</li>
</ul>
<ol start="3">
<li>搭建相关代理服务</li>
</ol>
<hr>
<blockquote>
<p>注：如下的搭建和安装脚本可参看本库的 scripts 目录下的脚本，如： <a href="https://github.com/haoel/haoel.github.io/blob/master/scripts/install.ubuntu.18.04.sh">Ubuntu 18.04 Installation Script</a> （感谢网友 <a href="https://github.com/gongzili456">@gongzili456</a> 开发）</p>
</blockquote>
<h3 id="31-设置-docker-服务">3.1 设置 Docker 服务</h3>
<p>首先，你要安装一个 Docker CE 服务，这里你要去看一下 docker 官方的安装文档：</p>
<ul>
<li><a href="https://docs.docker.com/install/linux/docker-ce/centos/">CentOS 上的 Docker CE 安装</a></li>
<li><a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/">Ubuntu 上的 Docker CE 安装</a></li>
</ul>
<p>然后开始设置你的 VPN/SS 服务</p>
<h3 id="32-开启-tcp-bbr-拥塞控制算法">3.2 开启 TCP BBR 拥塞控制算法</h3>
<p>TCP BBR（Bottleneck Bandwidth and Round-trip propagation time）是由 Google 设计，于 2016 年发布的拥塞算法。以往大部分拥塞算法是基于丢包来作为降低传输速率的信号，而 BBR 则基于模型主动探测。该算法使用网络最近出站数据分组当时的最大带宽和往返时间来创建网络的显式模型。数据包传输的每个累积或选择性确认用于生成记录在数据包传输过程和确认返回期间的时间内所传送数据量的采样率。该算法认为随着网络接口控制器逐渐进入千兆速度时，分组丢失不应该被认为是识别拥塞的主要决定因素，所以基于模型的拥塞控制算法能有更高的吞吐量和更低的延迟，可以用 BBR 来替代其他流行的拥塞算法，例如 CUBIC。Google 在 YouTube 上应用该算法，将全球平均的 YouTube 网络吞吐量提高了 4%，在一些国家超过了 14%。</p>
<p>BBR 之后移植入 Linux 内核 4.9 版本，并且对于 QUIC 可用。</p>
<p>如果开启，请参看 《<a href="https://github.com/iMeiji/shadowsocks_install/wiki/%E5%BC%80%E5%90%AF-TCP-BBR-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%AE%97%E6%B3%95">开启 TCP BBR 拥塞控制算法</a> 》</p>
<h3 id="33-用-gost-设置-https-服务">3.3 用 Gost 设置 HTTPS 服务</h3>
<p><a href="https://github.com/ginuerzh/gost">gost</a> 是一个非常强的代理服务，它可以设置成 HTTPS 代理，然后把你的服务伪装成一个 Web 服务器，<strong>我感觉这比其它的流量伪装更好，也更隐蔽。这也是这里强烈推荐的一个方式</strong>。</p>
<p>为了更为的隐蔽，你需要一个域名（可以上 GoDaddy，但一定要使用美国版），然后使用 <a href="https://letsencrypt.org/">Let’s Encrypt</a> 来签 一个证书。使用 Let’s Encrypt 证书你需要在服务器上安装一个 <a href="https://certbot.eff.org/instructions">certbot</a>，点击 <a href="https://certbot.eff.org/instructions">certbot</a> 这个链接，你可以选择你的服务器，操作系统，然后就跟着指令走吧。</p>
<p>接下来，你需要申请一个证书（我们使用 standalone 的方式，然后，你需要输入你的电子邮件和你的域名）：</p>
<pre tabindex="0"><code>$ sudo certbot certonly --standalone
</code></pre><p>证书默认生成在 <code>/etc/letsencrypt/live/&lt;YOUR.DOMAIN.COM/&gt;</code> 目录下，这个证书 90 天后就过期了，所以，需要使用一个 cron job 来定期更新（稍后给出）</p>
<p>接下来就是启动 gost 服务了，我们这里还是使用 Docker 的方式建立 gost 服务器。</p>
<pre tabindex="0"><code>#!/bin/bash

# 下面的四个参数需要改成你的
DOMAIN=&#34;YOU.DOMAIN.NAME&#34;
USER=&#34;username&#34;
PASS=&#34;password&#34;
PORT=443

BIND_IP=0.0.0.0
CERT_DIR=/etc/letsencrypt
CERT=${CERT_DIR}/live/${DOMAIN}/fullchain.pem
KEY=${CERT_DIR}/live/${DOMAIN}/privkey.pem
sudo docker run -d --name gost \
    -v ${CERT_DIR}:${CERT_DIR}:ro \
    --net=host ginuerzh/gost \
    -L &#34;http2://${USER}:${PASS}@${BIND_IP}:${PORT}?cert=${CERT}&amp;key=${KEY}&amp;probe_resist=code:404&amp;knock=www.google.com&#34;
</code></pre><p>上面这个脚本，你需要配置：域名 (<code>DOMAIN</code>), 用户名 (<code>USER</code>), 密码 (<code>PASS</code>) 和 端口号 (<code>PORT</code>) 这几个变量。</p>
<p>关于 gost 的参数， 你可以参看其文档：<a href="https://docs.ginuerzh.xyz/gost/">Gost Wiki</a>，上面我设置一个参数 <code>probe_resist=code:404</code> 意思是，如果服务器被探测，或是用浏览器来访问，返回 404 错误，也可以返回一个网页（如：<code>probe_resist=file:/path/to/file.txt</code> 或其它网站 <code>probe_resist=web:example.com/page.html</code>）</p>
<p><strong>注意</strong>：开启了探测防御功能后，当认证失败时服务器默认不会响应 <code>407 Proxy Authentication Required</code>，但某些情况下客户端需要服务器告知代理是否需要认证 (例如 Chrome 中的 SwitchyOmega 插件)。通过 knock 参数设置服务器才会发送 407 响应。对于上面的例子，我们的<code>knock</code>参数配置的是<code>www.google.com</code>，所以，你需要先访问一下 <code>https://www.google.com</code> 让服务端返回一个 <code>407</code> 后，SwitchyOmega 才能正常工作。</p>
<p><strong>注意</strong>：如果认证信息（也就是用户名和密码）中包含特殊字符，则可以（应该是必须！否则客户端一侧会有很多不兼容）通过 auth 参数来设置：</p>
<pre tabindex="0"><code>gost -L :8080?auth=YWRtaW46MTIzNDU2 -F ss://:8338?auth=Y2hhY2hhMjA6QWEjJiEkMTIzNEA1Njc4
</code></pre><p>auth 的值为 user:passbase64 编码值</p>
<p>如无意外，你的服务就启起来了。你可以使用下面的命令验证你的 gost 服务是否正常。</p>
<pre tabindex="0"><code>curl -v &#34;https://www.google.com&#34; --proxy &#34;https://DOMAIN&#34; --proxy-user &#39;USER:PASS&#39;
</code></pre><p>接下来就是证书的自动化更新。</p>
<p>可以使用命令 <code>crontab -e</code> 来编辑定时任务：</p>
<pre tabindex="0"><code>0 0 1 * * /usr/bin/certbot renew --force-renewal
5 0 1 * * /usr/bin/docker restart gost
</code></pre><p>这样，服务器就配置完成了。客户端请移动后面的客户端章节。</p>
<h3 id="34-设置-shadowsocks-服务">3.4 设置 ShadowSocks 服务</h3>
<p><strong>（注：ShadowSocks 被查的机率非常大，不推荐使用）</strong></p>
<p>ShadowSocks 的 Docker 启动脚本 （其中的 <code>SS_PORT</code> 和 <code>SS_PASSWD</code> 需要重新定义一下）</p>
<pre tabindex="0"><code>#!/bin/bash

SS_PORT=1984
SS_PASSWD=MyPasswd

sudo docker run -dt --name ss \
   -p ${SS_PORT}:${SS_PORT} mritd/shadowsocks \
   -s &#34;-s 0.0.0.0 -p ${SS_PORT} -m aes-256-cfb -k ${SS_PASSWD} --fast-open&#34;
</code></pre><h3 id="35-设置-l2tpipsec-服务">3.5 设置 L2TP/IPSec 服务</h3>
<p><strong>（注：VPN 方式被查的机率非常大，不推荐使用）</strong></p>
<p>L2TP/IPSec 的启动脚本，其中的三个环境变量 <code>USER</code>， <code>PASS</code> 和 <code>PSK</code> 需要替换一下。</p>
<pre tabindex="0"><code>#!/bin/bash

USER=someone
PASS=password
PSK=psk_key

sudo docker run -d  --privileged \
    -e PSK=${PSK} \
    -e USERNAME=${USER} -e PASSWORD=${PASS} \
    -p 500:500/udp \
    -p 4500:4500/udp \
    -p 1701:1701/tcp \
    -p 1194:1194/udp  \
    siomiz/softethervpn
</code></pre><h3 id="36-设置-pptp-服务">3.6 设置 PPTP 服务</h3>
<p><strong>（注：PPTP 不安全，请不要使用）</strong></p>
<pre tabindex="0"><code>sudo docker run -d --privileged --net=host
                -v {/path_to_file/chap-secrets}:/etc/ppp/chap-secrets \
                mobtitude/vpn-pptp
</code></pre><p>PPTP 使用 <code>/etc/ppp/chap-secrets</code> 文件设置用户名和密码，所以你需要给 docker 容器提供这个文件，下面是这个文件的示例：</p>
<pre tabindex="0"><code># Secrets for authentication using PAP
# client    server      secret           acceptable local IP addresses
  fuckgfw   *           whosyourdaddy    *
</code></pre><ol start="4">
<li>客户端设置</li>
</ol>
<hr>
<h3 id="41-gost-客户端">4.1 gost 客户端</h3>
<p>大多数的代理服务都支持 https 的代理，但是我们需要智能代理（也就是该翻的时候翻，不用翻的时候不翻），那么我们可以重用 ShadowSocks 的客户端。</p>
<p>对于电脑来说，你同样可以 <a href="https://github.com/ginuerzh/gost/releases">下载 gost 程序</a>，然后使用下面的命令行：</p>
<pre tabindex="0"><code>gost -L ss://aes-128-cfb:passcode@:1984 -F &#39;https://USER:PASS@DOMAIN:443&#39;
</code></pre><p>这样用 gost 在你的本机启动了一个 <code>ShadowSocks</code> 的服务，然后，把请求转到你在上面配置的 HTTPS 服务器上，这样就完成转接。</p>
<pre tabindex="0"><code>┌─────────────┐  ┌─────────────┐            ┌─────────────┐
│ ShadowSocks │  │             │            │             │
│    Client   ├──► Gost Client ├────────────► Gost Server │
│ (PAC Auto)  │  │             │            │             │
└─────────────┘  └─────────────┘            └─────────────┘
</code></pre><p><strong>ShadowSocks Client 主要完成：自动设置操作系统代理服务器的 pac （自动设置翻墙或是不翻墙的路由）</strong></p>
<p>这样，你的 ShadowSocks 客户端只需要简单的配置一个本机的 SS 配置就好了。</p>
<p>对于手机端</p>
<ul>
<li>iPhone，可以考虑使用 <code>ShadowRocket</code> （需要付费），其中使用 HTTPS 的代理，配置上就好了。</li>
<li>Android，可以考虑使用这个 Plugin - <a href="https://github.com/xausky/ShadowsocksGostPlugin">ShadowsocksGostPlugin</a></li>
</ul>
<p><strong>注明</strong>：如果你之前使用了 Chrome 插件 SwitchyOmega，如果无法直接配置 HTTPS 代理，具体原因可能是因为你设置了<code>probe_resist</code>以开启探测防御功能。这里，你需要在服务器端设置 <code>knock</code> 参数（参看 <a href="#33-%E7%94%A8-gost-%E8%AE%BE%E7%BD%AE-https-%E6%9C%8D%E5%8A%A1">用 Gost 设置 HTTPS 服务</a> 中的 “注意” 一节 ）</p>
<p>或是，干脆使用 gost 客户端在本机启动一个 SOCKS5 的代理服务用来代替（<code>gost -L socks5://:1080 -F 'https://USER:PASS@DOMAIN:443'</code>），然后在 SwitchyOmega 配置代理为’127.0.0.1:1080’即可。比如:</p>
<h3 id="42-shadowsocks-客户端">4.2 Shadowsocks 客户端</h3>
<p>对于 Shadowsocks 客户端，可以到这里查看 <a href="https://shadowsocks.org/en/download/clients.html">Shadowsocks Clients</a></p>
<ul>
<li>MacOS 上你可以下载 <a href="https://github.com/shadowsocks/ShadowsocksX-NG/releases">ShadowsocksX-NG</a></li>
<li>Windows 上你可以下载 <a href="https://github.com/shadowsocks/shadowsocks-windows/releases">Shadowsocks-Windows</a>，需要先安装 <a href="https://dotnet.microsoft.com/download/dotnet-framework-runtime">.NET Framework</a></li>
<li>Android 的客户端，你可以用手机访问并下载 <a href="https://github.com/shadowsocks/shadowsocks-android/releases">Shadowsocks-Android</a></li>
<li>iPhone 端就比较麻烦了。因为国内全都被下架了。
<ol>
<li>你需要注册一个美国的苹果 ID.</li>
<li>然后 iTunes/App Store 用这个美区的 ID 登录（不是退出 iCloud ，而是退出 App Store）</li>
<li>然后搜索 <code>Potatso Lite</code> ，<code>ShadowRocket</code>, <code>Wingy</code>, <code>Quantumult</code> 等。（我使用前两个）</li>
</ol>
</li>
</ul>
<blockquote>
<p><strong>注意</strong></p>
<ul>
<li>关于如何注册美区 Apple ID 账号，你可以参看如下的这几篇文章（我不保证这些文章可不可用，但是你可以自行 Google）。
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/36574047">5 分钟注册美国区 Apple ID（18 年亲测有效）</a></li>
<li><a href="https://www.jianshu.com/p/b32da641e849">2018 年 6 月亲测：注册美国地区苹果 apple ID 帐号终极教程</a></li>
<li><a href="https://blog.csdn.net/ziyuzhiye/article/details/82769129">iOS 开发之注册美国 Apple Id 不需要绑定信用卡，亲测可用</a></li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="43-vpn-客户端">4.3 VPN 客户端</h3>
<p>对于 L2TP/IPSec，几乎所有的客户端操作系统（无论是 Windows/Mac/Linux 的电脑，还是 iPhone/Android）都支持，你可以自行 Google。</p>
<ul>
<li><a href="https://www.jianshu.com/p/24e48cfb574f">Mac OS X PPTP/L2TP 设置教程</a></li>
<li><a href="http://nic.upc.edu.cn/2016/0928/c7809a132077/page.htm">Windows 7 操作系统配置 L2TP VPN 方法</a></li>
</ul>
<ol start="5">
<li>流量伪装和其它方式</li>
</ol>
<hr>
<p>无论你用 VPN，SS，SSR，都有可能被识别，<strong>只有使用 HTTP over TLS 的样子，才会跟正常的流量混在一起，很难被识别</strong>，所以，目前来说，V2Ray 客户端 + Nginx + V2Ray 服务端的方式，或是 gost 的 HTTPS 的方式，基本上来说，在网络四层上看到的都是 TLS 的包，很难被识别。这种代理服务我觉得只能做探测，或是得到更多的算力来做统计学分析。所以，V2Ray 和 gost 的服务器端用 nginx 再挡一道，那么就很难被发现了。</p>
<blockquote>
<p><strong>注：</strong> 说句老实话，我其时并不想害怕别人知道自己的上什么样的网站，因为我觉得我访问的都是合法的网站，但是就今天这个局势我也没办法——为什么要让像我这样的光明正大的良民搞得跟偷鸡摸狗之徒一样……</p>
</blockquote>
<h3 id="51-v2ray">5.1 V2Ray</h3>
<p>V2Ray 可以配置成一个非常隐蔽的代理软件。</p>
<ul>
<li>V2Ray 用户手册：<a href="https://www.v2fly.org/">https://www.v2fly.org</a></li>
<li>V2Ray 项目地址：<a href="https://github.com/v2fly/v2ray-core">https://github.com/v2fly/v2ray-core</a></li>
</ul>
<p>一般来说，祼用 V2Ray 不是一个很好的方式，现在比较流行的是使用 nginx 来代理，也就是 V2Ray + WebSocket + TLS + Nginx，可以参看这篇文章《<a href="https://guide.v2fly.org/advanced/wss_and_web.html">V2Ray+WebSocket+TLS+Nginx 配置与使用教程</a>》（需要翻墙）。</p>
<p>我个人觉得，配置起来比较复杂，而且环节太多，不如直接用 <code>gost</code> 的 https/http2 的方式配置起来简单，所以，没有放在前面。</p>
<h3 id="52-brook">5.2 Brook</h3>
<p>Brook 是一个由 Go 语言编写的跨平台代理软件，支持 Linux/MacOS/Windows/Android/iOS 各个平台。</p>
<ul>
<li>Brook Github 项目：<a href="https://github.com/txthinking/brook">https://github.com/txthinking/brook</a></li>
<li>Github Wiki 教程：<a href="https://github.com/txthinking/brook/wiki/%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E(%E4%B8%AD%E6%96%87)">https://github.com/txthinking/brook/wiki / 使用说明 (中文)</a></li>
</ul>
<p>服务器一行命令安装：</p>
<pre tabindex="0"><code>wget -N --no-check-certificate https://raw.githubusercontent.com/ToyoDAdoubi/doubi/master/brook.sh &amp;&amp; chmod +x brook.sh &amp;&amp; bash brook.sh
</code></pre><p>运行 <code>brook.sh</code> 会出菜单项，你可以按菜单项来，主要就是设置端口号，密码。很简单的，我这里就不截图了，因为这个脚本运行起来中文菜单式的。</p>
<p>然后你可以在 Brook 项目的 Github 首页上下载不同平台的客户端。设置起来也很简单！</p>
<blockquote>
<p>注意: 如果运行出现下载错误，可能是因为 brook 的下载文件名问题，你需要自己修改一下脚本：</p>
<pre tabindex="0"><code>Download_brook(){
 	[[ ! -e ${file} ]] &amp;&amp; mkdir ${file}
 	cd ${file}
 	if [[ ${bit} == &#34;x86_64&#34; ]]; then
-		wget --no-check-certificate -N &#34;https://github.com/txthinking/brook/releases/download/${brook_new_ver}/brook&#34;
+		wget --no-check-certificate -N &#34;https://github.com/txthinking/brook/releases/download/${brook_new_ver}/brook_linux_amd64&#34;
+		mv brook_linux_amd64 brook
 	else
 		wget --no-check-certificate -N &#34;https://github.com/txthinking/brook/releases/download/${brook_new_ver}/brook_linux_386&#34;
 		mv brook_linux_386 brook
 	fi
</code></pre></blockquote>
<ol start="6">
<li>针对 IP 被封的解决方案</li>
</ol>
<hr>
<p>花钱购买的 VPS 即便做了流量伪装依然有很大的几率 IP 被封锁，大多 VPS 服务商并不提供更换 IP 的服务，使用 CDN 可以让被封锁的 VPS 继续发挥翻墙功能。</p>
<h3 id="61-cloudflare">6.1 Cloudflare</h3>
<p>Cloudflare 是一个 CDN 服务商，目前国内依然能正常的访问，可以作为跳板来实现翻墙。</p>
<p>注册 Cloudflare 帐号，并有一个空闲域名（三级域名即可），交给 Cloudflare 托管并将域名指向被封的 VPS IP，注意开启 Proxied 并且 SSL-TLS 使用 Flexible 选项。</p>
<p>Cloudflare 只需免费方案足以，不必花钱。</p>
<blockquote>
<p><strong>注</strong>：如果你要用 Cloudflare 来代理 gost 服务的话，你得使用 Websocket 协议</p>
<ul>
<li><strong>server</strong>: <code>gost -L=mwss://user:password@:443</code></li>
<li><strong>client</strong>: <code>gost -L socks5://:1080 -F mwss://user:password@yourdomain:443</code></li>
<li><strong>cloudflare</strong>: <code>ssl/tls:full</code></li>
</ul>
</blockquote>
<h3 id="62-v2ray">6.2 V2Ray</h3>
<p>VPS 上正常安装并配置好 V2Ray，注意两点:</p>
<ol>
<li>传输协议必须要使用 ws</li>
<li>要使用 80 或者 8080 端口</li>
</ol>
<p>如果端口有其他用途，那么用 Nginx/Caddy 之类软件，做一个 WebSocket proxy 到 V2Ray 即可。</p>
<h3 id="63-补充">6.3 补充</h3>
<p>客户端注意使用网址来连接。</p>
<p>目前支持 WebSocket 的免费 CDN 似乎只有 Cloudflare 一家，国内 CDN 服务商既不支持也不安全，不要考虑了。如果有更好的服务商欢迎补充。</p>
<p>网络延迟比直连增加不少，如果是频繁操作会很痛苦。网络带宽如果运气好可能比直连还优化了，用来看 Youtube 搞不好更流畅。</p>
<ol start="7">
<li>家用透明网关</li>
</ol>
<hr>
<h3 id="71-openwrt-路由器">7.1 OpenWRT 路由器</h3>
<p>所谓透明网关的意思是，一切都交给网关来做。最好的方式是你需要一个 OpenWRT 的路由器，推荐使用华硕的路由器，贵是贵一些，但是这几年用下来，非常不错。我用的是 <strong>华硕（ASUS） RT-AC68U 1900M AC 双频智能无线路由路</strong> 。</p>
<p>路由器买来后，要刷一下固件。首先 Asuswrt 是华硕公司为他的路由器所开发的固件。Asuswrt-merlin 是一个对 Asuswrt 固件二次开发进行各种改进和修正的项目。源代码在这里：<a href="https://github.com/RMerl/asuswrt-merlin">https://github.com/RMerl/asuswrt-merlin</a></p>
<p>不必担心把路由器刷废了，华硕的路由器可以让你一键重置回来</p>
<p><strong>1）下载固件</strong>。先到 <a href="https://asuswrt.lostrealm.ca/download">https://asuswrt.lostrealm.ca/download</a> 下载相应的固件，并解压。（我下载的是 <code>RT-AC68U_380.61_0.zip</code> ）</p>
<p><strong>2）升级固件</strong>。登录到你的路由器后台 <code>http://192.168.1.1/</code> ，在 <code>系统管理</code> -&gt; <code>固件升级</code> 中上传固件文件（我上传的是：<code>RT-AC68U_380.61_0.trx</code>）</p>
<p><strong>3）打开 JFFS 分区</strong>。<code>系统管理</code> -&gt; <code>系统设置</code> -&gt; <code>Persistent JFFS2 partition</code></p>
<ul>
<li><code>Format JFFS partition at next boot</code> - <code>否</code></li>
<li><code>Enable JFFS custom scripts and configs</code> - <code>是</code></li>
</ul>
<p><strong>4）打开 ssh 登录</strong>。 <code>系统管理</code> -&gt; <code>系统设置</code> -&gt; <code>SSH Daemon</code></p>
<ul>
<li><code>Allow SSH password login</code> - <code>是</code></li>
</ul>
<p>接下来，在 WiFi 路由器上安装 Clash，就可以了。</p>
<p>大概的示意图如下所示。</p>
<pre tabindex="0"><code>        Phone/PC/Pad （无需设置）
             │
             │
             │ 1
             │
    ┌────────▼──────┐
    │               │
    │  WiFi Router  │ （安装 Clash 网关）
    │               │
    └─────┬────┬────┘
          │    │
          │    │ 2
          │    └────────► 墙内 - China LAN
       3  │
    ┌─────▼──────┐
    │    VPS     │
    │   Proxy    │
    └─────┬──────┘
          │
          │
          ▼
        墙外 - Internet WAN
</code></pre><h3 id="72-通过树莓派做旁路网关">7.2 通过树莓派做旁路网关</h3>
<p>如果你的路由器不能刷 OpenWRT，也就是没法通过 SSH 登录上去装软件，你就用一个别的设备。比如用一个树莓派。我正好有一个很老旧的树莓派，刷了一个老旧的 Debian 7.5 的操作系统。</p>
<p>把它连上你的路由器上，然后，</p>
<ul>
<li>你需要把你设备上的 IP 地址、网关和 DNS 服务器都要手动设置到这个树莓派上。</li>
<li>于是，所有的路由就会通过路由器转到树莓派上，再由树莓派决定是否要走代理。</li>
</ul>
<p>大概的示意图如下所示。</p>
<ul>
<li>1 –&gt; 2 是设备把所有的请求都发给树莓派。</li>
<li>3 –&gt; 3.1 或 3.2 是由树莓派来决走是否翻墙。</li>
</ul>
<pre tabindex="0"><code>        Phone/PC/Pad （设置&#34;网关&#34;和&#34;DNS&#34;为树莓派）
             │
             │
             │ 1
             │                    （安装 Clash 网关）
    ┌────────▼──────┐      2       ┌───────────┐
    │               ├──────────────►           │
    │  WiFi Router  │              │   树莓派   │
    │               ◄──────────────┤           │
    └─────┬────┬────┘      3       └───────────┘
          │    │
          │    │ 3.2
          │    └────────► 墙内 - China LAN
      3.1 │
    ┌─────▼──────┐
    │    VPS     │
    │   Proxy    │
    └─────┬──────┘
          │
          │
          ▼
        墙外 - Internet WAN
</code></pre><h3 id="73-安装-clash">7.3 安装 Clash</h3>
<p>Clash 的 Github 项目是：<a href="https://github.com/Dreamacro/clash">Dreamacro/clash</a> ，在它的 Release 页面上，你可以找到相关的下载。（注：在本文更新的时候，如果你需要支持 Tun，你需要下载 Clash 的 <a href="https://github.com/Dreamacro/clash/releases/tag/premium">Premium 版本</a></p>
<p>Clash 支持很多翻墙协议：ShadowSocks(R), Vmess, Socks5, HTTP(s)，Snell，Trojan。</p>
<p>在你的 OpenWRT 或 树莓派 下用 <code>uname -m</code> 查看一下你的硬件架构是什么的，比如，我的是华硕和树莓派都是 <code>armv7l</code> 的，所以，需要下载 <code>clash-linux-armv7-....</code>的版本（注：根据 clash 官方仓库 <a href="https://github.com/Dreamacro/clash/issues/189">Dreamacro/clash#189</a> 系列固件不适用 armv7l 架构的 AC68U，需选择 armv5）。 下载完解压后，加个可执行权限 <code>chmod +x clash</code> 就可以运行了，不过，还差一个界面和两个配置文件，它们的目录关系如下：</p>
<pre tabindex="0"><code>├── clash                &lt;- 建一个 clash 的目录
│   ├── clash            &lt;- 运行文件
│   ├── config.yaml      &lt;- 配置文件
│   ├── Country.mmdb     &lt;- IP地址库
│   └── ui               &lt;- Clash 的 UI
│       ├── index.html
│       ├── ...
</code></pre><ul>
<li>
<p>UI 界面可以到 <a href="https://github.com/haishanh/yacd">haishah/yacd</a> 下载。放到 clash 的配置目录下 <code>ui</code> 目录下</p>
</li>
<li>
<p>一个是 <code>Country.mmdb</code> 这是 IP 地址的在哪个国家的数据库。你需要到这里下载 - <a href="https://github.com/Dreamacro/maxmind-geoip/releases/latest/download/Country.mmdb">Country.mmdb</a> （当然，clash 启动时，会自动下载，我这里给你一个手动下载的链接）</p>
</li>
<li>
<p>另一个是 <code>config.yaml</code> 文件，这个文件详细解释可参看 - <a href="https://github.com/Dreamacro/clash/wiki/configuration">官方 Wiki</a></p>
</li>
</ul>
<p>下面是个示例：</p>
<pre tabindex="0"><code>port: 7890
socks-port: 7891
redir-port: 7892
mixed-port: 7893
ipv6: false
allow-lan: true
mode: Rule
log-level: info
external-controller: &#39;0.0.0.0:9090&#39;
external-ui: ui
secret: &#39;&#39;
tun:
  enable: true
  stack: system
  dns-hijack:
    - tcp://8.8.8.8:53
    - udp://8.8.8.8:53
dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:53
  default-nameserver:
    - 114.114.114.114
  #enhanced-mode: redir-host
  enhanced-mode: fake-ip #如果要玩netflix，需要使用fake-ip
  fake-ip-range: 198.18.0.1/16
  nameserver:
    - 114.114.114.114
    - 223.5.5.5
    - tls://8.8.8.8:853
  fallback:
    - tls://8.8.8.8:853

# 两个代理服务器
proxies:
  # http
  - name: &#34;https01&#34;
    type: http
    server: https.server.domain
    port: 443
    username: user
    password: &#34;password&#34;
    tls: true # https
    skip-cert-verify: true
  - name: &#34;https01&#34;
    type: http
    server: https.server.domain
    port: 443
    username: user
    password: &#34;passowrd&#34;
    tls: true # https
    skip-cert-verify: true

# 配置 Group
proxy-groups:
  # 自动切换
  - name: &#34;auto&#34;
    type: url-test
    proxies:
      - us01_https
      #- us02_https
      #- hk_https
    # tolerance: 150
    url: &#39;https://www.google.com/&#39;
    interval: 300
  # 按需选择 - 可以在UI上选择
  - name: &#34;netflix&#34;
    type: select
    proxies:
      - us01_https
      - us02_https
      - hk_https

rules:
# LAN
  - DOMAIN-SUFFIX,local,DIRECT
  - IP-CIDR,127.0.0.0/8,DIRECT
  - IP-CIDR,172.16.0.0/12,DIRECT
  - IP-CIDR,192.168.0.0/16,DIRECT
  - IP-CIDR,10.0.0.0/8,DIRECT

# Netflix
  - DOMAIN-SUFFIX,fast.com,netflix
  - DOMAIN-SUFFIX,api-global.netflix.com,netflix
  - DOMAIN-SUFFIX,netflix.com,netflix
  - DOMAIN-SUFFIX,netflix.net,netflix
  - DOMAIN-SUFFIX,nflxext.com,netflix
  - DOMAIN-SUFFIX,nflximg.com,netflix
  - DOMAIN-SUFFIX,nflximg.net,netflix
  - DOMAIN-SUFFIX,nflxso.net,netflix
  - DOMAIN-SUFFIX,nflxvideo.net,netflix

# 最终规则（除了中国区的IP之外的，全部翻墙）
  - GEOIP,CN,DIRECT
  - MATCH,auto
</code></pre><p>更多的规则网上可以找到很多，也可以参看这里：<a href="https://github.com/Hackl0us/SS-Rule-Snippet/blob/master/LAZY_RULES/clash.yaml">SS-Rule-Snippet/LAZY_RULES/clash.yaml</a></p>
<p>这个时候你就可以启动 clash 了：</p>
<pre tabindex="0"><code>/path/to/clash/cash -d /path/to/clash &amp;
</code></pre><p>然后，你就可以把你的上网设备上的 路由网关 和 DNS 服务器都手动地配置成这个网关就好了（OpenWRT 应该不用配置了，树莓派的方式需要手动配置一下）</p>
<h3 id="74-设置-iptables-转发">7.4 设置 iptables 转发</h3>
<pre tabindex="0"><code>iptables -t nat -N CLASH
iptables -t nat -A CLASH -d 10.0.0.0/8 -j RETURN
iptables -t nat -A CLASH -d 127.0.0.0/8 -j RETURN
iptables -t nat -A CLASH -d 169.254.0.0/16 -j RETURN
iptables -t nat -A CLASH -d 172.16.0.0/12 -j RETURN
iptables -t nat -A CLASH -d 192.168.0.0/16 -j RETURN
iptables -t nat -A CLASH -d 224.0.0.0/4 -j RETURN
iptables -t nat -A CLASH -d 240.0.0.0/4 -j RETURN
iptables -t nat -A CLASH -p tcp -j REDIRECT --to-ports 7892
</code></pre><p>然后，你可以保存一下这些 iptables 的规则</p>
<pre tabindex="0"><code> iptables-save &gt; /etc/iptables.up.rules
</code></pre><p>编辑 <code>/etc/network/if-pre-up.d/iptables</code>，在网卡启动的时候加载这些规则</p>
<pre tabindex="0"><code>#!/bin/sh
/sbin/iptables-restore &lt; /etc/iptables.up.rules
</code></pre><p>然后，再 <code>chmod +x /etc/network/if-pre-up.d/iptables</code> 加上可执行权限就好了。</p>
<ol start="8">
<li>数据中心透明网关</li>
</ol>
<hr>
<p>这里仅针对 AWS 进行说明，其它云平台应该大同小异，大家可以补充。</p>
<h3 id="81-aws-网络构建">8.1 AWS 网络构建</h3>
<ol>
<li>构建一个 <code>172.20.0.0/16</code> 的 VPC，分成两个子网：
<ul>
<li>有公网 IP 的公有子网 - <code>172.20.1.0/24</code></li>
<li>无公网 IP 的私有子网 - <code>172.20.2.0/24</code></li>
</ul>
</li>
<li>在公有子网里创建 <a href="https://docs.aws.amazon.com/zh_cn/vpc/latest/userguide/VPC_NAT_Instance.html">EC2 NAT Instance</a>
<ul>
<li>创建时，指定私网 IP 为 <code>172.20.1.1</code></li>
<li>（Option）为该实例分配弹性 IP，可成为外网访问内网的跳板机</li>
</ul>
</li>
<li>建立路由规则
<ul>
<li>创建 “互联网网关”，并把“互联网网关” 添加到公有子网 <code>172.20.1.0/24</code> 的路由表中</li>
<li>把 EC2 NAT Instance <code>172.20.1.1</code> 添加到私有子网<code>172.20.2.0/24</code>的路由表中。</li>
</ul>
</li>
</ol>
<p>于是整个网络就如下所示。</p>
<pre tabindex="0"><code>                                    ┌──────────┐
                                    │          │
                                    │          │
                                    └──────────┘
          弹性IP                      互联网网关
        ┌───────────────┐                ▲
        │xxx.xxx.xxx.xxx├─┐              │
        └───────────────┘ │  ┌───────────┘
                          │  │
                  ┌───────┼──┼────────┐       ┌───────────────────┐
                  │       │  │        │       │                   │
                  │     ┌─┴──▼──┐     │       │  ┌─┐ ┌─┐ ┌─┐ ┌─┐  │
  Public Network  │     │       │◄────┼───┬───┼─►└─┘ └─┘ └─┘ └─┘  │  Private Network
                  │     └───────┘     │   │   │                   │
                  │  EC2 NAT Instance │   │   │  ┌─┐ ┌─┐ ┌─┐ ┌─┐  │
                  │    172.20.1.1     │   ├───┼─►└─┘ └─┘ └─┘ └─┘  │
                  │                   │   │   │                   │
                  │   (NAT Instance)  │   │   │    ┌─┐ ┌─┐ ┌─┐    │
                  │                   │   └───┼─►  └─┘ └─┘ └─┘    │
                  │                   │       │                   │
                  └───────────────────┘       └───────────────────┘

                      172.20.1.0/24              172.20.2.0/24
                           ▲                            ▲
                    subnet │                            │ subnet
                           │                            │
                           └──────────  VPC  ───────────┘
                                   172.20.0.0/16
</code></pre><p>注：你需要认真的按照 <a href="https://docs.aws.amazon.com/zh_cn/vpc/latest/userguide/VPC_NAT_Instance.html">EC2 NAT Instance</a> 的文档进行设置这个 NAT 实例。尤其需要设置下面几项：</p>
<pre tabindex="0"><code>sudo sysctl -w net.ipv4.ip_forward=1
sudo iptables -A FORWARD -i eth0 -j ACCEPT
sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
</code></pre><p>顺便科普一下：</p>
<ul>
<li><code>net.ipv4.ip_forward</code> 是内核参数，主要是用来把 Linux 当成路由器来用的参数。一般来说，一个路由器至少要有两个网络接口，一个是 WAN，的一个是 LAN 的，为了让 LAN 和 WAN 的流量相通，需要进行内核上路由。</li>
<li><code>iptables -A FORWARD -i eth0 -j ACCEPT</code> 通行所有需要转发的包，只有机器成为一个路由器时，需要在两个网卡间进行网络包转发时，才需要配置这条规则。</li>
<li><code>iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE</code> 关键字 <code>MASQUERADE</code> 意思是 “伪装 “，NAT 的工作原理是就像是一个宿舍收发室对学生宿舍一样，学生宿舍的地址外部不可见，邮递员只看得见整栋宿舍收发室的地址，邮递员把快递交给收发室，收发室再把快递转给学习宿舍（反之，如果学生要对外寄邮件，也是先到收发室，收发室传给邮局）。现在的问题是，所有的学生宿舍如何才能参与到任何快递的通信中，如果把学生宿舍地址发到外部，则没人能把信送回来。如果这个收发室是个自动化的机器人，他要干的事就是，把学生宿舍的地址换成收发室地址。这就是 <code>MASQUERADE</code> 的意思——<strong>来自具有接收方 IP 地址的本地网络到达 Internet 某处的数据包必须进行修改，也就是让发送方的地址等于路由器的地</strong>址。</li>
</ul>
<h3 id="82-安装-clash">8.2 安装 Clash</h3>
<p>在 EC2 NAT Instance 上安装 clash 透明网关，安装配置参看 <a href="#73-%E5%AE%89%E8%A3%85-clash">7.3 安装 Clash</a> ，基本一致。</p>
<blockquote>
<p>注：在实际操作中，没有设置 <code>iptables</code> 转发规则</p>
</blockquote>
<h3 id="83-配置私有子网中的-ec2">8.3 配置私有子网中的 EC2</h3>
<p>只需要配置 <code>/etc/resolv.conf</code> 文件，把 EC2 NAT Instance 加入其中。如：</p>
<pre tabindex="0"><code># /etc/resolv.conf
nameserver 172.20.1.1  #&lt;--- 透明网关 EC2 NAT 实例
nameserver 172.20.0.2  #&lt;--- AWS 的 DNS 服务
search [zone].compute.internal
</code></pre><h3 id="84-私有子网中的-kubernetes">8.4 私有子网中的 Kubernetes</h3>
<p>K8s 里有两组 CoreDNS 部署和配置，一组是边缘的（或是叫本地的），一组是中心的。</p>
<ul>
<li>边缘的 Pod 名叫 <code>nodelocaldns</code>，侦听在本机。如：<code>169.254.25.10:53</code></li>
<li>中心的 Pod 名叫 <code>coredns</code>，侦听在 cluster IP 上，如：<code>10.233.0.3:53</code></li>
</ul>
<p>边缘的规则会把 k8s 的域名 <code>cluster.local</code>, <code>in-addr.arp</code> <code>ip6.arpa</code> 转给中心的 CoreDNS 处理，其它的交给本地的 <code>/etc/resolv.conf</code> 处理。</p>
<p>Kubernetes 会把如下内容打到 Pod 里的 <code>/etc/resolv.conf</code></p>
<pre tabindex="0"><code>nameserver 169.254.25.10
search default.svc.cluster.local svc.cluster.local cluster.local cn-northwest-1.compute.internal
options ndots:5
</code></pre><p>查看一下 <code>nodelocaldns</code> 的配置：</p>
<pre tabindex="0"><code>$ kubectl get cm nodelocaldns -n kube-system -o yaml
</code></pre><p>我们可以看到，除了 K8s 自己的域名外，其它的都交给了本机的 <code>/etc/resolv.conf</code>，如下所示：</p>
<pre tabindex="0"><code>.:53 {
    errors
    cache 30
    reload
    loop
    bind 169.254.25.10
    forward . /etc/resolv.conf  # &lt;--- 注意这条语句
    prometheus :9253
}
</code></pre><p>然而，本机的 <code>/etc/resolv.conf</code> 里有两个 DNS，一个是我们的透明网关，一个是 AWS 的。而 CoreDNS 的 <code>forward</code> 策略是随机挑选，所以，这样的会导致，时而交给 AWS 处理，时而交给我们自己的 clash 处理。最终导致 IP 解析紊乱。</p>
<p>通过以下命令进行修改：</p>
<pre tabindex="0"><code>$ kubectl edit cm nodelocaldns -n kube-system
</code></pre><p>修改如下：（AWS 的归 172.20.0.2， 其它的走我们自己的网关）</p>
<pre tabindex="0"><code>+    compute.internal:53 {
+        errors
+        cache 30
+        reload
+        loop
+        bind 169.254.25.10
+        forward . 172.20.0.2
+        prometheus :9253
+    }
     .:53 {
         errors
         cache 30
         reload
         loop
         bind 169.254.25.10
-        forward . /etc/resolv.conf
+        forward . /etc/resolv.conf {
+            policy sequential
+        }
         prometheus: 9253
     }
</code></pre><p>退出保存后，等大约 30 秒左右配置就会生效。</p>
<ol start="9">
<li>其它</li>
</ol>
<hr>
<h3 id="91-其它方式">9.1 其它方式</h3>
<p>如下还有一些其它的方式（注：均由网友提供，我没有验证过）</p>
<p><a href="https://getoutline.org/en/home">Outline</a> 是由 Google 旗下 <a href="https://jigsaw.google.com/">Jigsaw</a> 团队开发的整套翻墙解决方案。Server 端使用 Shadowsocks，MacOS, Windows, iOS, Android 均有官方客户端。使用 Outline Manager 可以一键配置 DigitalOcean。其他平台例如 AWS, Google Cloud 也提供相应脚本。主要优点就是使用简单并且整个软件栈全部<a href="https://github.com/Jigsaw-Code/?q=outline">开源</a>，有专业团队长期维护。</p>
<h3 id="92-搭建脚本">9.2 搭建脚本</h3>
<p>上述的搭建和安装脚本可参看本库的 scripts 目录下的脚本（感谢网友 <a href="https://github.com/gongzili456">@gongzili456</a> 开发）</p>
<ul>
<li><a href="https://github.com/haoel/haoel.github.io/blob/master/scripts/install.ubuntu.18.04.sh">Ubuntu 18.04 Installation Script</a></li>
</ul>
<ol start="10">
<li>代理技巧</li>
</ol>
<hr>
<p>看到这里，相信已经能够按照上面的教程搭建好自己的上网环境，但是灵活的应用网络，你还需要了解一技巧，比如 SOCKS 协议, http 隧道 和 ssh 网络隧道等。</p>
<ol>
<li><a href="https://zh.m.wikipedia.org/zh-hans/SOCKS">SOCKS 协议</a></li>
<li><a href="https://zh.m.wikipedia.org/zh-hans/HTTP%E9%9A%A7%E9%81%93">HTTP 隧道</a></li>
</ol>
<h3 id="101-http-隧道">10.1 HTTP 隧道</h3>
<p>常见的软件 curl , git, wget 都能通过设置 <code>HTTP_PROXY</code>,<code>HTTPS_PROXY</code>，<code>NO_PROXY</code> 来配置一个网络代理，<code>NO_PROXY</code>用来配置不需要代理的主机 (多个用逗号隔开), 那么我们就可以编写一个 <code>bash</code> 函数来运行需要走代理的命令:</p>
<pre tabindex="0"><code>with_proxy(){
   HTTPS_PROXY=http://127.0.0.1:7890 HTTP_PROXY=http://127.0.0.1:7890 &#34;$@&#34;
}
</code></pre><p>把上面的 <code>127.0.0.1:7890</code> 改成你自己的网络代理, 将上面脚本写入到 <code>~/.bashrc</code> 中， <code>source ~/.bashrc</code> 后就能使用 <code>with_proxy</code> 这个函数了，比如我想要使用代理网络下载一个文件 <code>with_proxy wget https://....</code>, 想要使用代理网络从 <code>github</code> clone 一个项目 <code>with_proxy git clone https://...</code>, 当我们不用 <code>with_proxy</code> 这个函数的时候命令是不会走代理的，如果在 <code>windows</code> 上你也想要使用这样的功能，可以使用这个项目 <a href="https://github.com/hellojukay/with-env">with-env</a>。</p>
<p>另外，你也可以使用如下的两个 alias:</p>
<pre tabindex="0"><code>SOCKS=&#34;socks5://127.0.0.1:1085&#34;
alias proxy=&#34;export http_proxy=${SOCKS} https_proxy=${SOCKS} all_proxy=${SOCKS}&#34;
alias unproxy=&#39;unset all_proxy http_proxy https_proxy&#39;
</code></pre><p>这样，你就可以在需要代理的时候输入 <code>proxy</code>，不需要的时候输入 <code>unproxy</code>。</p>
<h3 id="102-ssh-隧道">10.2 SSH 隧道</h3>
<p>另外，我们可以使用 SSH Tunnel 来建立 SOCKS5 的代理（假设本地电脑无法访问，但是某台可以 SSH 的服务器能够访问外网，那么我们就可以使用如下的命令来建议翻墙代理：</p>
<pre tabindex="0"><code>ssh -D 1080 -qCN username@server:port
</code></pre><p>解释：</p>
<ul>
<li><code>-D</code>：本机 SOCKS 服务端口</li>
<li><code>-q</code> : quiet 模式，没有输出</li>
<li><code>-C</code> : 数据压缩，可以节约一些带宽</li>
<li><code>-N</code> : 不运行远程命令，只做端口转发</li>
</ul>
<p>登录成功以后, 本地 <code>1080</code>端口会开启一个 <code>SOCKS5</code> 协议的代理，只要配置好代理就能使用这个端口上网。</p>
<pre tabindex="0"><code>with_proxy(){
   HTTPS_PROXY=socks5://127.0.0.1:1080 HTTP_PROXY=socks5://127.0.0.1:1080 &#34;$@&#34;
}
</code></pre><p>如果是浏览器，配置好<code>SwitchyOmega</code>插件也能实现上外网。</p>
<p>欢迎补充和改善！</p>
<p>（全文完）</p>

    <div class="CornerButtons">
        <div class="CornerAnimayedFlex">
            <div class="CornerButton" title="Back to the top">
                <a href="#top" class="cba fas fa-hand-middle-finger" ></a>
            </div>
        </div>
    </div>

<hr>

<h1 style="color: #1f71e0;">Comments</h1>
<script defer src="https://utteranc.es/client.js" 
repo="Jen-Jon/Jen-Jon.github.io" 
issue-term="title" 
theme="github-light" 
crossorigin="anonymous" async></script>


</div>

<h5 style="text-align: center; font-size: large;">This blog is licensed under <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/">CC BY-NC-ND 4.0</a>, please indicate the source for non-commercial reposted.</h5>


        </div><strong id="footer" class="mb-5">
    <hr>
    
    <div class="container text-center">
        
            <a href="https://github.com/Jen-Jon/" class="fab fa-github fa-1x" title="Github" style="text-decoration: none;"></a>
        
            <a href="https://hub.docker.com/u/ijerry22" class="fab fa-docker fa-1x" title="DockerHub" style="text-decoration: none;"></a>
        
            <a href="https://www.researchgate.net/profile/Jingyao-Zhang-4" class="fab fa-researchgate fa-1x" title="researchgate" style="text-decoration: none;"></a>
        
            <a href="mailto:jensen.acm@gmail.com" class="fas fa-envelope fa-1x" title="E-mail" style="text-decoration: none;"></a>
        
    </div>
    
        <div class="container text-center">
            <h5 class="text-center" style="font-size: small;">Copyright © 2020-2024 <a href="https://github.com/Jen-Jon/" style="color: #1f71e0;" title="Jensen-Jon">Jensen-Jon</a>. All rights reserved.</h5>
        </div>
    
</div>
</body>
</html>
